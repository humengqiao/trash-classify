{"id":"M8Me","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/src/optimizers/momentum_optimizer.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609563562293},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/add","loc":{"line":19,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../ops/mul","loc":{"line":20,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../ops/scalar","loc":{"line":21,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js"},{"name":"../ops/zeros_like","loc":{"line":22,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/zeros_like.js"},{"name":"../serialization","loc":{"line":23,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./sgd_optimizer","loc":{"line":24,"column":29},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/sgd_optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.MomentumOptimizer=void 0;var e=require(\"../engine\"),t=require(\"../globals\"),s=require(\"../ops/add\"),i=require(\"../ops/mul\"),a=require(\"../ops/scalar\"),r=require(\"../ops/zeros_like\"),n=require(\"../serialization\"),m=require(\"./sgd_optimizer\");class o extends m.SGDOptimizer{constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=(0,a.scalar)(this.momentum)}applyGradients(a){(Array.isArray(a)?a.map(e=>e.name):Object.keys(a)).forEach((n,m)=>{const o=e.ENGINE.registeredVariables[n];if(null==this.accumulations[m]){const e=!1;this.accumulations[m]={originalName:`${n}/momentum`,variable:(0,t.tidy)(()=>(0,r.zerosLike)(o).variable(e))}}const u=this.accumulations[m].variable,l=Array.isArray(a)?a[m].tensor:a[n];null!=l&&(0,t.tidy)(()=>{let e;const t=(0,s.add)((0,i.mul)(this.m,u),l);e=this.useNesterov?(0,s.add)((0,i.mul)(this.c,(0,s.add)(l,(0,i.mul)(t,this.m))),o):(0,s.add)((0,i.mul)(this.c,t),o),u.assign(t),o.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=o,o.className=\"Momentum\",(0,n.registerClass)(o);"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":99}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":101}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":105}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":107}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":115}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":128}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":130}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":138}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":152}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":154}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":162}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":176}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":178}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":186}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":200}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":202}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":210}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":227}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":229}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":237}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":258}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":260}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":268}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":288}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":290}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":298}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":317}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":1,"column":323}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":32,"column":39},"generated":{"line":1,"column":333}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":335}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":38,"column":2},"generated":{"line":1,"column":348}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":360}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":362}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":40,"column":14},"generated":{"line":1,"column":364}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":40,"column":28},"generated":{"line":1,"column":367}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":1,"column":370}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":1,"column":376}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":379}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":384}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":397}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":399}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":404}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":413}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":40,"column":14},"generated":{"line":1,"column":415}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":40,"column":14},"generated":{"line":1,"column":420}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":40,"column":14},"generated":{"line":1,"column":432}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":434}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":439}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":47},"generated":{"line":1,"column":453}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":9},"generated":{"line":1,"column":456}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":9},"generated":{"line":1,"column":461}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":464}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":466}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":468}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":20},"generated":{"line":1,"column":476}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":25},"generated":{"line":1,"column":481}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":491}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":45,"column":17},"generated":{"line":1,"column":506}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":46,"column":26},"generated":{"line":1,"column":510}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":46,"column":32},"generated":{"line":1,"column":516}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":46,"column":40},"generated":{"line":1,"column":524}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":527}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":529}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":30},"generated":{"line":1,"column":533}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":38},"generated":{"line":1,"column":536}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":43},"generated":{"line":1,"column":538}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":544}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":15},"generated":{"line":1,"column":551}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":20},"generated":{"line":1,"column":556}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":18},"generated":{"line":1,"column":560}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":568}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":27},"generated":{"line":1,"column":569}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":1,"column":571}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":576}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":582}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":584}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":27},"generated":{"line":1,"column":586}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":27},"generated":{"line":1,"column":593}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":47},"generated":{"line":1,"column":613}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":10},"generated":{"line":1,"column":616}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":35},"generated":{"line":1,"column":619}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":10},"generated":{"line":1,"column":625}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":15},"generated":{"line":1,"column":630}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":29},"generated":{"line":1,"column":644}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":41},"generated":{"line":1,"column":647}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":14},"generated":{"line":1,"column":648}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":14},"generated":{"line":1,"column":654}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":26},"generated":{"line":1,"column":657}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":54,"column":13},"generated":{"line":1,"column":659}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":54,"column":13},"generated":{"line":1,"column":664}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":54,"column":27},"generated":{"line":1,"column":678}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":54,"column":32},"generated":{"line":1,"column":681}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":55,"column":10},"generated":{"line":1,"column":682}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":55,"column":27},"generated":{"line":1,"column":698}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":10},"generated":{"line":1,"column":711}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":20},"generated":{"line":1,"column":721}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":723}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":725}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":731}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":1,"column":736}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":41},"generated":{"line":1,"column":738}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":41},"generated":{"line":1,"column":740}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":41},"generated":{"line":1,"column":751}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":48},"generated":{"line":1,"column":754}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":56,"column":57},"generated":{"line":1,"column":763}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":1,"column":768}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":1,"column":774}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":27},"generated":{"line":1,"column":776}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":32},"generated":{"line":1,"column":781}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":46},"generated":{"line":1,"column":795}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":49},"generated":{"line":1,"column":798}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":1,"column":807}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":61,"column":23},"generated":{"line":1,"column":809}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":61,"column":29},"generated":{"line":1,"column":815}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":61,"column":37},"generated":{"line":1,"column":823}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":826}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":62,"column":28},"generated":{"line":1,"column":828}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":62,"column":31},"generated":{"line":1,"column":831}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":838}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":63,"column":28},"generated":{"line":1,"column":840}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":64,"column":22},"generated":{"line":1,"column":843}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":64,"column":10},"generated":{"line":1,"column":849}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":853}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":855}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":857}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":863}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":69,"column":12},"generated":{"line":1,"column":868}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":69,"column":12},"generated":{"line":1,"column":872}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":874}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":880}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":32},"generated":{"line":1,"column":883}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":36},"generated":{"line":1,"column":885}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":36},"generated":{"line":1,"column":887}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":36},"generated":{"line":1,"column":893}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":40},"generated":{"line":1,"column":895}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":40},"generated":{"line":1,"column":897}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":40},"generated":{"line":1,"column":902}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":45},"generated":{"line":1,"column":907}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":48},"generated":{"line":1,"column":909}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":63},"generated":{"line":1,"column":912}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":10},"generated":{"line":1,"column":915}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":71,"column":12},"generated":{"line":1,"column":917}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":71,"column":17},"generated":{"line":1,"column":922}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":21},"generated":{"line":1,"column":935}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":937}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":939}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":945}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":18},"generated":{"line":1,"column":947}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":18},"generated":{"line":1,"column":949}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":18},"generated":{"line":1,"column":954}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":23},"generated":{"line":1,"column":959}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":26},"generated":{"line":1,"column":962}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":30},"generated":{"line":1,"column":964}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":30},"generated":{"line":1,"column":966}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":30},"generated":{"line":1,"column":971}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":40},"generated":{"line":1,"column":974}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":44},"generated":{"line":1,"column":976}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":44},"generated":{"line":1,"column":978}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":44},"generated":{"line":1,"column":983}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":61},"generated":{"line":1,"column":985}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":66},"generated":{"line":1,"column":990}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":73,"column":72},"generated":{"line":1,"column":995}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":21},"generated":{"line":1,"column":999}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1001}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1003}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1009}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1011}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1013}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1018}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":34},"generated":{"line":1,"column":1023}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":1,"column":1025}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":55},"generated":{"line":1,"column":1028}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":1031}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":77,"column":21},"generated":{"line":1,"column":1033}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":77,"column":28},"generated":{"line":1,"column":1040}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":1043}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":78,"column":14},"generated":{"line":1,"column":1045}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":78,"column":21},"generated":{"line":1,"column":1052}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":81,"column":9},"generated":{"line":1,"column":1059}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":81,"column":9},"generated":{"line":1,"column":1064}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":1086}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":85,"column":9},"generated":{"line":1,"column":1096}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":85,"column":9},"generated":{"line":1,"column":1101}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":85,"column":11},"generated":{"line":1,"column":1103}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":86,"column":30},"generated":{"line":1,"column":1113}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":1119}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":1,"column":1124}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":14},"generated":{"line":1,"column":1140}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":14},"generated":{"line":1,"column":1142}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":14},"generated":{"line":1,"column":1144}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":14},"generated":{"line":1,"column":1153}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":19},"generated":{"line":1,"column":1158}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":33},"generated":{"line":1,"column":1172}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":37},"generated":{"line":1,"column":1176}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":42},"generated":{"line":1,"column":1179}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":87,"column":44},"generated":{"line":1,"column":1181}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1192}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":96,"column":14},"generated":{"line":1,"column":1204}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":97,"column":9},"generated":{"line":1,"column":1207}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":97,"column":9},"generated":{"line":1,"column":1212}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":97,"column":20},"generated":{"line":1,"column":1221}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":8},"generated":{"line":1,"column":1223}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":11},"generated":{"line":1,"column":1242}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":11},"generated":{"line":1,"column":1248}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":18},"generated":{"line":1,"column":1255}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":23},"generated":{"line":1,"column":1260}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":41},"generated":{"line":1,"column":1278}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":48},"generated":{"line":1,"column":1285}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":53},"generated":{"line":1,"column":1290}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":102,"column":67},"generated":{"line":1,"column":1304}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":8},"generated":{"line":1,"column":1308}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":14},"generated":{"line":1,"column":1312}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":15},"generated":{"line":1,"column":1313}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":21},"generated":{"line":1,"column":1318}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":23},"generated":{"line":1,"column":1320}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":37},"generated":{"line":1,"column":1333}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":45},"generated":{"line":1,"column":1340}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":47},"generated":{"line":1,"column":1342}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":106,"column":8},"generated":{"line":1,"column":1355}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":106,"column":19},"generated":{"line":1,"column":1372}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":4},"generated":{"line":1,"column":1375}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":25},"generated":{"line":1,"column":1383}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":30},"generated":{"line":1,"column":1388}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":48},"generated":{"line":1,"column":1406}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":109,"column":9},"generated":{"line":1,"column":1409}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":109,"column":9},"generated":{"line":1,"column":1414}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":109,"column":25},"generated":{"line":1,"column":1428}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":109,"column":38},"generated":{"line":1,"column":1430}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":1,"column":1434}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":14},"generated":{"line":1,"column":1438}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":15},"generated":{"line":1,"column":1439}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":29},"generated":{"line":1,"column":1452}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":31},"generated":{"line":1,"column":1454}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":37},"generated":{"line":1,"column":1459}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":47},"generated":{"line":1,"column":1468}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":49},"generated":{"line":1,"column":1470}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":56},"generated":{"line":1,"column":1477}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":108,"column":22},"generated":{"line":1,"column":1487}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":1493}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":114,"column":11},"generated":{"line":1,"column":1505}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":114,"column":11},"generated":{"line":1,"column":1511}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":115,"column":22},"generated":{"line":1,"column":1512}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":115,"column":22},"generated":{"line":1,"column":1525}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":115,"column":27},"generated":{"line":1,"column":1530}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":116,"column":18},"generated":{"line":1,"column":1543}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":116,"column":18},"generated":{"line":1,"column":1552}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":116,"column":23},"generated":{"line":1,"column":1557}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":117,"column":21},"generated":{"line":1,"column":1566}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":117,"column":21},"generated":{"line":1,"column":1578}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":117,"column":26},"generated":{"line":1,"column":1583}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":9},"generated":{"line":1,"column":1596}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":123,"column":6},"generated":{"line":1,"column":1614}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":123,"column":39},"generated":{"line":1,"column":1616}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":124,"column":11},"generated":{"line":1,"column":1619}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":124,"column":11},"generated":{"line":1,"column":1626}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":124,"column":15},"generated":{"line":1,"column":1630}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":8},"generated":{"line":1,"column":1632}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":14},"generated":{"line":1,"column":1634}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":32},"generated":{"line":1,"column":1647}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":38},"generated":{"line":1,"column":1649}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":52},"generated":{"line":1,"column":1658}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":58},"generated":{"line":1,"column":1660}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":1674}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":1682}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":1700}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":1702}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":1704}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":34,"column":21},"generated":{"line":1,"column":1714}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":0},"generated":{"line":1,"column":1726}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":14},"generated":{"line":1,"column":1728}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":14},"generated":{"line":1,"column":1730}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":128,"column":14},"generated":{"line":1,"column":1745}}],"sources":{"../../src/optimizers/momentum_optimizer.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ENGINE} from '../engine';\nimport {dispose, tidy} from '../globals';\nimport {add} from '../ops/add';\nimport {mul} from '../ops/mul';\nimport {scalar} from '../ops/scalar';\nimport {zerosLike} from '../ops/zeros_like';\nimport {ConfigDict, registerClass, Serializable, SerializableConstructor} from '../serialization';\nimport {Scalar, Tensor} from '../tensor';\nimport {NamedTensor, NamedVariableMap} from '../tensor_types';\n\nimport {OptimizerVariable} from './optimizer';\nimport {SGDOptimizer} from './sgd_optimizer';\n\n/** @doclink Optimizer */\nexport class MomentumOptimizer extends SGDOptimizer {\n  /** @nocollapse */\n  static className = 'Momentum';  // Name matters for Python compatibility.\n  private m: Scalar;\n  private accumulations: OptimizerVariable[] = [];\n\n  constructor(\n      protected learningRate: number, private momentum: number,\n      private useNesterov = false) {\n    super(learningRate);\n    this.m = scalar(this.momentum);\n  }\n\n  applyGradients(variableGradients: NamedVariableMap|NamedTensor[]) {\n    const variableNames = Array.isArray(variableGradients) ?\n        variableGradients.map(item => item.name) :\n        Object.keys(variableGradients);\n\n    variableNames.forEach((name, i) => {\n      const value = ENGINE.registeredVariables[name];\n      if (this.accumulations[i] == null) {\n        const trainable = false;\n        this.accumulations[i] = {\n          originalName: `${name}/momentum`,\n          variable: tidy(() => zerosLike(value).variable(trainable))\n        };\n      }\n\n      const accumulation = this.accumulations[i].variable;\n      const gradient = Array.isArray(variableGradients) ?\n          variableGradients[i].tensor :\n          variableGradients[name];\n      if (gradient == null) {\n        return;\n      }\n\n      tidy(() => {\n        let newValue: Tensor;\n        const newAccumulation = add(mul(this.m, accumulation), gradient);\n        if (this.useNesterov) {\n          newValue = add(\n              mul(this.c, add(gradient, mul(newAccumulation, this.m))), value);\n        } else {\n          newValue = add(mul(this.c, newAccumulation), value);\n        }\n        accumulation.assign(newAccumulation);\n        value.assign(newValue);\n      });\n    });\n    this.incrementIterations();\n  }\n\n  dispose(): void {\n    this.m.dispose();\n    if (this.accumulations != null) {\n      dispose(this.accumulations.map(v => v.variable));\n    }\n  }\n\n  /**\n   * Sets the momentum of the optimizer.\n   *\n   * @param momentum\n   */\n  setMomentum(momentum: number) {\n    this.momentum = momentum;\n  }\n\n  async getWeights(): Promise<NamedTensor[]> {\n    // Order matters for Python compatibility.\n    return [await this.saveIterations()].concat(this.accumulations.map(\n        v => ({name: v.originalName, tensor: v.variable})));\n  }\n\n  async setWeights(weightValues: NamedTensor[]): Promise<void> {\n    weightValues = await this.extractIterations(weightValues);\n    const trainable = false;\n    this.accumulations = weightValues.map(\n        v => ({originalName: v.name, variable: v.tensor.variable(trainable)}));\n  }\n\n  getConfig(): ConfigDict {\n    return {\n      'learningRate': this.learningRate,\n      'momentum': this.momentum,\n      'useNesterov': this.useNesterov\n    };\n  }\n\n  /** @nocollapse */\n  static fromConfig<T extends Serializable>(\n      cls: SerializableConstructor<T>, config: ConfigDict): T {\n    return new cls(\n        config['learningRate'], config['momentum'], config['useNesterov']);\n  }\n}\nregisterClass(MomentumOptimizer);\n"},"lineCount":null}},"error":null,"hash":"550058f35420ff9bfccf1bc077a58928","cacheData":{"env":{}}}