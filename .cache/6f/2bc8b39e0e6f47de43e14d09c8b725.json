{"id":"SiRR","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609565653941},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../../gradients","loc":{"line":18,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/gradients.js"},{"name":"../../kernel_names","loc":{"line":19,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/kernel_names.js"},{"name":"../../tensor_util","loc":{"line":20,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/tensor_util.js"},{"name":"../../tensor_util_env","loc":{"line":21,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/tensor_util_env.js"},{"name":"../../util","loc":{"line":22,"column":22},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/util.js"},{"name":"../add","loc":{"line":23,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../broadcast_util","loc":{"line":24,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/broadcast_util.js"},{"name":"../conv2d","loc":{"line":25,"column":40},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/conv2d.js"},{"name":"../conv2d_backprop_filter","loc":{"line":26,"column":37},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/conv2d_backprop_filter.js"},{"name":"../conv2d_backprop_input","loc":{"line":27,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/conv2d_backprop_input.js"},{"name":"../conv_util","loc":{"line":28,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/conv_util.js"},{"name":"../fused_util","loc":{"line":29,"column":88},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused_util.js"},{"name":"../operation","loc":{"line":30,"column":19},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/operation.js"},{"name":"../reshape","loc":{"line":31,"column":24},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/conv2d.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/reshape.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.conv2d=void 0;var e=require(\"../../engine\"),r=require(\"../../gradients\"),t=require(\"../../kernel_names\"),n=require(\"../../tensor_util\"),o=require(\"../../tensor_util_env\"),a=g(require(\"../../util\")),i=require(\"../add\"),s=g(require(\"../broadcast_util\")),u=require(\"../conv2d\"),d=require(\"../conv2d_backprop_filter\"),p=require(\"../conv2d_backprop_input\"),c=g(require(\"../conv_util\")),l=require(\"../fused_util\"),v=require(\"../operation\"),f=require(\"../reshape\");function h(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function b({x:v,filter:h,strides:g,pad:b,dataFormat:k=\"NHWC\",dilations:m=[1,1],dimRoundingMode:y,bias:_,activation:q=\"linear\",preluActivationWeights:E}){if(q=q||\"linear\",!1===(0,l.shouldFuse)(e.ENGINE.state.gradientDepth,q)){let e=(0,u.conv2d)(v,h,g,b,k,m,y);return null!=_&&(e=(0,i.add)(e,_)),(0,l.applyActivation)(e,q,E)}const F=(0,o.convertToTensor)(v,\"x\",\"conv2d\"),D=(0,o.convertToTensor)(h,\"filter\",\"conv2d\");let O=F,$=!1;3===F.rank&&($=!0,O=(0,f.reshape)(F,[1,F.shape[0],F.shape[1],F.shape[2]])),a.assert(4===O.rank,()=>\"Error in fused conv2d: input must be rank 4, but got rank \"+`${O.rank}.`),a.assert(4===D.rank,()=>\"Error in fused conv2d: filter must be rank 4, but got rank \"+`${D.rank}.`),null!=y&&a.assert(a.isInt(b),()=>\"Error in fused conv2d: pad must be an integer when using, \"+`dimRoundingMode ${y} but got pad ${b}.`),a.assert(O.shape[3]===D.shape[2],()=>`Error in conv2d: depth of input (${O.shape[3]}) must match `+`input depth for filter ${D.shape[2]}.`),a.assert(c.eitherStridesOrDilationsAreOne(g,m),()=>\"Error in conv2D: Either strides or dilations must be 1. \"+`Got strides ${g} and dilations '${m}'`),a.assert(\"NHWC\"===k,()=>`Error in conv2d: got dataFormat of ${k} but only NHWC is currently supported.`);const G=c.computeConv2DInfo(O.shape,D.shape,g,m,b,y);let N,T;null!=_&&(N=(0,o.convertToTensor)(_,\"bias\",\"fused conv2d\"),[N]=(0,n.makeTypesMatch)(N,F),s.assertAndGetBroadcastShape(G.outShape,N.shape)),null!=E&&(T=(0,o.convertToTensor)(E,\"prelu weights\",\"fused conv2d\"));const A=(e,r)=>{const[t,n,o,i]=r,s=(0,l.getFusedDyActivation)(e,o,q);a.assert(c.tupleValuesAreOne(m),()=>\"Error in gradient of fused conv2D: dilation rates greater than 1 \"+`are not yet supported in gradients. Got dilations '${m}'`);const u=[(0,p.conv2DBackpropInput)(n.shape,s,t,g,b),(0,d.conv2DBackpropFilter)(n,s,t.shape,g,b)];if(null!=i){const e=(0,l.getFusedBiasGradient)(i,s);u.push(e)}return u},C=e=>{return e.fusedConv2d({input:O,filter:D,convInfo:G,bias:N,activation:q,preluActivationWeights:T})},M={x:O,filter:D,bias:N,preluActivationWeights:T},W={strides:g,pad:b,dataFormat:k,dilations:m,dimRoundingMode:y,activation:q};if(null==_){return(0,r.customGrad)((r,n,o)=>{let a=e.ENGINE.runKernelFunc(C,M,null,t.FusedConv2D,W);return o([n,r,a]),$&&(a=(0,f.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:A}})(O,D)}return(0,r.customGrad)((r,n,o,a)=>{let i=e.ENGINE.runKernelFunc(C,M,null,t.FusedConv2D,W);return a([n,r,i,o]),$&&(i=(0,f.reshape)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:A}})(O,D,N)}const k=(0,v.op)({fusedConv2d_:b});exports.conv2d=k;"},"sourceMaps":null,"error":null,"hash":"bbd6b195bdde97803a25b350a353affa","cacheData":{"env":{}}}