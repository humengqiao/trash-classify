{"id":"w47l","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609563696417},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../gradients","loc":{"line":17,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/gradients.js"},{"name":"../../tensor_util_env","loc":{"line":18,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/tensor_util_env.js"},{"name":"../../util","loc":{"line":19,"column":34},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/util.js"},{"name":"../add","loc":{"line":20,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../axis_util","loc":{"line":21,"column":37},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/axis_util.js"},{"name":"../cast","loc":{"line":22,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/cast.js"},{"name":"../div","loc":{"line":23,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/div.js"},{"name":"../exp","loc":{"line":24,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/exp.js"},{"name":"../log_sum_exp","loc":{"line":25,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_sum_exp.js"},{"name":"../loss_ops_utils","loc":{"line":26,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/loss_ops_utils.js"},{"name":"../mul","loc":{"line":27,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../neg","loc":{"line":28,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/neg.js"},{"name":"../operation","loc":{"line":29,"column":19},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/operation.js"},{"name":"../reshape","loc":{"line":30,"column":24},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/reshape.js"},{"name":"../scalar","loc":{"line":31,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js"},{"name":"../sub","loc":{"line":32,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js"},{"name":"../sum","loc":{"line":33,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sum.js"},{"name":"./compute_weighted_loss","loc":{"line":34,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/softmax_cross_entropy.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/losses/compute_weighted_loss.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.softmaxCrossEntropy=void 0;var e=require(\"../../gradients\"),r=require(\"../../tensor_util_env\"),s=require(\"../../util\"),o=require(\"../add\"),t=require(\"../axis_util\"),a=require(\"../cast\"),n=require(\"../div\"),u=require(\"../exp\"),i=require(\"../log_sum_exp\"),l=require(\"../loss_ops_utils\"),p=require(\"../mul\"),c=require(\"../neg\"),m=require(\"../operation\"),d=require(\"../reshape\"),q=require(\"../scalar\"),x=require(\"../sub\"),f=require(\"../sum\"),h=require(\"./compute_weighted_loss\");function _(r,s,o=-1){if(-1===o&&(o=s.rank-1),o!==s.rank-1)throw Error(\"Softmax cross entropy along a non-last dimension is not yet \"+`supported. Labels / logits was rank ${s.rank} `+`and dim was ${o}`);return(0,e.customGrad)((e,r,s)=>{const n=(0,i.logSumExp)(r,[o],!0),l=(0,x.sub)((0,a.cast)(r,\"float32\"),n);s([e,l]);const m=(0,c.neg)((0,p.mul)(l,e));return{value:(0,f.sum)(m,[o]),gradFunc:(e,r)=>{const[s,n]=r,i=(0,t.expandShapeToKeepDim)(e.shape,[o]);return[(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,a.cast)(s,\"float32\"),(0,u.exp)(n))),(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,u.exp)(n),(0,a.cast)(s,\"float32\")))]}}})(r,s)}function g(e,t,a,u=0,i=l.Reduction.SUM_BY_NONZERO_WEIGHTS){let c=(0,r.convertToTensor)(e,\"onehotLabels\",\"softmaxCrossEntropy\");const m=(0,r.convertToTensor)(t,\"logits\",\"softmaxCrossEntropy\");let d=null;if(null!=a&&(d=(0,r.convertToTensor)(a,\"weights\",\"softmaxCrossEntropy\")),(0,s.assertShapesMatch)(c.shape,m.shape,\"Error in softmaxCrossEntropy: \"),u>0){const e=(0,q.scalar)(u),r=(0,q.scalar)(1),s=(0,q.scalar)(c.shape[1]);c=(0,o.add)((0,p.mul)(c,(0,x.sub)(r,e)),(0,n.div)(e,s))}const f=_(c,m);return(0,h.computeWeightedLoss)(f,d,i)}const E=(0,m.op)({softmaxCrossEntropy_:g});exports.softmaxCrossEntropy=E;"},"sourceMaps":null,"error":null,"hash":"3846fbebb910200060a9217128d491fe","cacheData":{"env":{}}}