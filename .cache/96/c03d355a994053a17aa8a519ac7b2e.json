{"id":"WprY","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609565653941},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/add","loc":{"line":19,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../ops/div","loc":{"line":20,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/div.js"},{"name":"../ops/mul","loc":{"line":21,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../ops/ops","loc":{"line":22,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/ops.js"},{"name":"../ops/square","loc":{"line":23,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/square.js"},{"name":"../ops/zeros_like","loc":{"line":24,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/zeros_like.js"},{"name":"../serialization","loc":{"line":25,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./optimizer","loc":{"line":26,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adadelta_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.AdadeltaOptimizer=void 0;var a=require(\"../engine\"),e=require(\"../globals\"),s=require(\"../ops/add\"),i=require(\"../ops/div\"),t=require(\"../ops/mul\"),r=require(\"../ops/ops\"),l=require(\"../ops/square\"),n=require(\"../ops/zeros_like\"),u=require(\"../serialization\"),d=require(\"./optimizer\");class o extends d.Optimizer{constructor(e,s,i=null){super(),this.learningRate=e,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=a.ENGINE.backend.epsilon())}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((d,o)=>{const c=a.ENGINE.registeredVariables[d];null==this.accumulatedGrads[o]&&(this.accumulatedGrads[o]={originalName:`${d}/accum_grad`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))}),null==this.accumulatedUpdates[o]&&(this.accumulatedUpdates[o]={originalName:`${d}/accum_var`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))});const m=Array.isArray(u)?u[o].tensor:u[d];if(null==m)return;const h=this.accumulatedGrads[o].variable,p=this.accumulatedUpdates[o].variable;(0,e.tidy)(()=>{const a=(0,s.add)((0,t.mul)(h,this.rho),(0,t.mul)((0,l.square)(m),1-this.rho)),e=(0,t.mul)((0,i.div)((0,r.sqrt)((0,s.add)(p,this.epsilon)),(0,r.sqrt)((0,s.add)(h,this.epsilon))),m),n=(0,s.add)((0,t.mul)(p,this.rho),(0,t.mul)((0,l.square)(e),1-this.rho));h.assign(a),p.assign(n);const u=(0,s.add)((0,t.mul)(e,-this.learningRate),c);c.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,e.dispose)(this.accumulatedGrads.map(a=>a.variable)),(0,e.dispose)(this.accumulatedUpdates.map(a=>a.variable)))}async getWeights(){const a=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(a.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){const e=(a=await this.extractIterations(a)).length/2;this.accumulatedGrads=a.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)})),this.accumulatedUpdates=a.slice(e,2*e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(a,e){return new a(e.learningRate,e.rho,e.epsilon)}}exports.AdadeltaOptimizer=o,o.className=\"Adadelta\",(0,u.registerClass)(o);"},"sourceMaps":null,"error":null,"hash":"81d67ec4aa4860e9f55424ce6b7647c2","cacheData":{"env":{}}}