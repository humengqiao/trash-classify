{"id":"DXeN","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609563696417},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/package.json","includedInParent":true,"mtime":499162500000},{"name":"./flags_webgl","loc":{"line":18,"column":7},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/flags_webgl.js"},{"name":"@tensorflow/tfjs-core","loc":{"line":22,"column":55},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/index.js"},{"name":"./kernel_utils/shared","loc":{"line":23,"column":126},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/kernel_utils/shared.js"},{"name":"./addn_gpu","loc":{"line":29,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/addn_gpu.js"},{"name":"./addn_packed_gpu","loc":{"line":30,"column":34},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/addn_packed_gpu.js"},{"name":"./argminmax_gpu","loc":{"line":31,"column":33},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/argminmax_gpu.js"},{"name":"./argminmax_packed_gpu","loc":{"line":32,"column":39},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/argminmax_packed_gpu.js"},{"name":"./avg_pool_backprop_gpu","loc":{"line":33,"column":41},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/avg_pool_backprop_gpu.js"},{"name":"./binaryop_gpu","loc":{"line":35,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/binaryop_gpu.js"},{"name":"./binaryop_packed_gpu","loc":{"line":37,"column":38},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/binaryop_packed_gpu.js"},{"name":"./canvas_util","loc":{"line":38,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/canvas_util.js"},{"name":"./clip_gpu","loc":{"line":39,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/clip_gpu.js"},{"name":"./clip_packed_gpu","loc":{"line":40,"column":34},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/clip_packed_gpu.js"},{"name":"./complex_abs_gpu","loc":{"line":41,"column":34},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/complex_abs_gpu.js"},{"name":"./conv_backprop_gpu","loc":{"line":42,"column":109},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/conv_backprop_gpu.js"},{"name":"./conv_backprop_gpu_depthwise","loc":{"line":43,"column":80},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/conv_backprop_gpu_depthwise.js"},{"name":"./conv_gpu","loc":{"line":44,"column":45},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/conv_gpu.js"},{"name":"./conv_gpu_depthwise","loc":{"line":45,"column":39},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/conv_gpu_depthwise.js"},{"name":"./conv_packed_gpu_depthwise","loc":{"line":46,"column":45},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/conv_packed_gpu_depthwise.js"},{"name":"./crop_and_resize_gpu","loc":{"line":47,"column":37},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/crop_and_resize_gpu.js"},{"name":"./cumsum_gpu","loc":{"line":48,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/cumsum_gpu.js"},{"name":"./decode_matrix_gpu","loc":{"line":49,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/decode_matrix_gpu.js"},{"name":"./decode_matrix_packed_gpu","loc":{"line":50,"column":42},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/decode_matrix_packed_gpu.js"},{"name":"./depth_to_space_gpu","loc":{"line":51,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/depth_to_space_gpu.js"},{"name":"./diag_gpu","loc":{"line":52,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/diag_gpu.js"},{"name":"./encode_float_gpu","loc":{"line":53,"column":35},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_float_gpu.js"},{"name":"./encode_float_packed_gpu","loc":{"line":54,"column":41},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_float_packed_gpu.js"},{"name":"./encode_matrix_gpu","loc":{"line":55,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_gpu.js"},{"name":"./encode_matrix_packed_gpu","loc":{"line":56,"column":42},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_packed_gpu.js"},{"name":"./fill_gpu","loc":{"line":57,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/fill_gpu.js"},{"name":"./gather_gpu","loc":{"line":58,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/gather_gpu.js"},{"name":"./gather_nd_gpu","loc":{"line":59,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/gather_nd_gpu.js"},{"name":"./gpgpu_context","loc":{"line":60,"column":29},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/gpgpu_context.js"},{"name":"./gpgpu_math","loc":{"line":61,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/gpgpu_math.js"},{"name":"./im2col_packed_gpu","loc":{"line":62,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/im2col_packed_gpu.js"},{"name":"./lrn_gpu","loc":{"line":63,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/lrn_gpu.js"},{"name":"./lrn_grad_gpu","loc":{"line":64,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/lrn_grad_gpu.js"},{"name":"./lrn_packed_gpu","loc":{"line":65,"column":33},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/lrn_packed_gpu.js"},{"name":"./max_pool_backprop_gpu","loc":{"line":66,"column":41},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/max_pool_backprop_gpu.js"},{"name":"./mulmat_packed_gpu","loc":{"line":67,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/mulmat_packed_gpu.js"},{"name":"./multinomial_gpu","loc":{"line":68,"column":35},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/multinomial_gpu.js"},{"name":"./onehot_gpu","loc":{"line":69,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/onehot_gpu.js"},{"name":"./pack_gpu","loc":{"line":70,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/pack_gpu.js"},{"name":"./pad_gpu","loc":{"line":71,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/pad_gpu.js"},{"name":"./pad_packed_gpu","loc":{"line":72,"column":33},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/pad_packed_gpu.js"},{"name":"./pool_gpu","loc":{"line":73,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/pool_gpu.js"},{"name":"./reduce_gpu","loc":{"line":74,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/reduce_gpu.js"},{"name":"./reshape_packed_gpu","loc":{"line":75,"column":37},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/reshape_packed_gpu.js"},{"name":"./resize_bilinear_backprop_gpu","loc":{"line":76,"column":46},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/resize_bilinear_backprop_gpu.js"},{"name":"./resize_bilinear_gpu","loc":{"line":77,"column":38},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/resize_bilinear_gpu.js"},{"name":"./resize_bilinear_packed_gpu","loc":{"line":78,"column":44},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/resize_bilinear_packed_gpu.js"},{"name":"./resize_nearest_neighbor_backprop_gpu","loc":{"line":79,"column":52},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/resize_nearest_neighbor_backprop_gpu.js"},{"name":"./resize_nearest_neighbor_gpu","loc":{"line":80,"column":45},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/resize_nearest_neighbor_gpu.js"},{"name":"./reverse_gpu","loc":{"line":81,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/reverse_gpu.js"},{"name":"./reverse_packed_gpu","loc":{"line":82,"column":37},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/reverse_packed_gpu.js"},{"name":"./scatter_gpu","loc":{"line":83,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/scatter_gpu.js"},{"name":"./segment_gpu","loc":{"line":84,"column":33},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/segment_gpu.js"},{"name":"./select_gpu","loc":{"line":85,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/select_gpu.js"},{"name":"./slice_gpu","loc":{"line":86,"column":29},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/slice_gpu.js"},{"name":"./slice_packed_gpu","loc":{"line":87,"column":35},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/slice_packed_gpu.js"},{"name":"./strided_slice_gpu","loc":{"line":88,"column":36},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/strided_slice_gpu.js"},{"name":"./tex_util","loc":{"line":90,"column":29},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/tex_util.js"},{"name":"./texture_manager","loc":{"line":91,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/texture_manager.js"},{"name":"./tile_gpu","loc":{"line":92,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/tile_gpu.js"},{"name":"./unaryop_gpu","loc":{"line":94,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/unaryop_gpu.js"},{"name":"./unaryop_packed_gpu","loc":{"line":96,"column":37},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/unaryop_packed_gpu.js"},{"name":"./unpack_gpu","loc":{"line":97,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/unpack_gpu.js"},{"name":"./webgl_util","loc":{"line":98,"column":28},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/backend_webgl.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-backend-webgl/dist/webgl_util.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.getBinaryCache=Ie,exports.MathBackendWebGL=exports.MATMUL_SHARED_DIM_THRESHOLD=exports.EPSILON_FLOAT16=exports.EPSILON_FLOAT32=void 0,require(\"./flags_webgl\");var e=me(require(\"@tensorflow/tfjs-core\")),t=require(\"./kernel_utils/shared\"),n=require(\"./addn_gpu\"),r=require(\"./addn_packed_gpu\"),a=require(\"./argminmax_gpu\"),s=require(\"./argminmax_packed_gpu\"),i=require(\"./avg_pool_backprop_gpu\"),o=me(require(\"./binaryop_gpu\")),p=me(require(\"./binaryop_packed_gpu\")),u=require(\"./canvas_util\"),h=require(\"./clip_gpu\"),l=require(\"./clip_packed_gpu\"),c=require(\"./complex_abs_gpu\"),d=require(\"./conv_backprop_gpu\"),m=require(\"./conv_backprop_gpu_depthwise\"),g=require(\"./conv_gpu\"),P=require(\"./conv_gpu_depthwise\"),A=require(\"./conv_packed_gpu_depthwise\"),_=require(\"./crop_and_resize_gpu\"),R=require(\"./cumsum_gpu\"),O=require(\"./decode_matrix_gpu\"),y=require(\"./decode_matrix_packed_gpu\"),f=require(\"./depth_to_space_gpu\"),I=require(\"./diag_gpu\"),k=require(\"./encode_float_gpu\"),w=require(\"./encode_float_packed_gpu\"),E=require(\"./encode_matrix_gpu\"),B=require(\"./encode_matrix_packed_gpu\"),x=require(\"./fill_gpu\"),D=require(\"./gather_gpu\"),C=require(\"./gather_nd_gpu\"),S=require(\"./gpgpu_context\"),L=me(require(\"./gpgpu_math\")),T=require(\"./im2col_packed_gpu\"),v=require(\"./lrn_gpu\"),U=require(\"./lrn_grad_gpu\"),b=require(\"./lrn_packed_gpu\"),N=require(\"./max_pool_backprop_gpu\"),M=require(\"./mulmat_packed_gpu\"),W=require(\"./multinomial_gpu\"),G=require(\"./onehot_gpu\"),q=require(\"./pack_gpu\"),F=require(\"./pad_gpu\"),z=require(\"./pad_packed_gpu\"),K=require(\"./pool_gpu\"),H=require(\"./reduce_gpu\"),Y=require(\"./reshape_packed_gpu\"),V=require(\"./resize_bilinear_backprop_gpu\"),Q=require(\"./resize_bilinear_gpu\"),X=require(\"./resize_bilinear_packed_gpu\"),j=require(\"./resize_nearest_neighbor_backprop_gpu\"),$=require(\"./resize_nearest_neighbor_gpu\"),J=require(\"./reverse_gpu\"),Z=require(\"./reverse_packed_gpu\"),ee=require(\"./scatter_gpu\"),te=require(\"./segment_gpu\"),ne=require(\"./select_gpu\"),re=require(\"./slice_gpu\"),ae=require(\"./slice_packed_gpu\"),se=require(\"./strided_slice_gpu\"),ie=me(require(\"./tex_util\")),oe=require(\"./texture_manager\"),pe=require(\"./tile_gpu\"),ue=me(require(\"./unaryop_gpu\")),he=me(require(\"./unaryop_packed_gpu\")),le=require(\"./unpack_gpu\"),ce=me(require(\"./webgl_util\"));function de(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return de=function(){return e},e}function me(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=de();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}const{segment_util:ge}=e.backend_util,Pe=e.kernel_impls.split,Ae=e.kernel_impls.tile,_e=e.kernel_impls.topkImpl,Re=e.kernel_impls.whereImpl,Oe=1e-7;exports.EPSILON_FLOAT32=Oe;const ye=1e-4;exports.EPSILON_FLOAT16=ye;const fe={};function Ie(e){return e in fe?fe[e]:(fe[e]={},fe[e])}function ke(e,t=!1){if(\"linear\"===e)return t?he.LINEAR:ue.LINEAR;if(\"relu\"===e)return t?he.RELU:ue.RELU;if(\"elu\"===e)return t?he.ELU:ue.ELU;if(\"relu6\"===e)return t?he.RELU6:ue.RELU6;if(\"prelu\"===e)return t?p.PRELU:o.PRELU;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}const we=128,Ee=600;function Be(){return null==(0,e.env)().global.screen?1024:(0,e.env)().global.screen.height*(0,e.env)().global.screen.width*window.devicePixelRatio*Ee/1024/1024}const xe=1e3;exports.MATMUL_SHARED_DIM_THRESHOLD=xe;class De extends e.KernelBackend{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!(0,e.env)().getBool(\"HAS_WEBGL\"))throw new Error(\"WebGL is not supported on this device\");if(null==t){const t=(0,u.getWebGLContext)((0,e.env)().getNumber(\"WEBGL_VERSION\"));this.binaryCache=Ie((0,e.env)().getNumber(\"WEBGL_VERSION\")),this.gpgpu=new S.GPGPUContext(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;this.textureManager=new oe.TextureManager(this.gpgpu),this.numMBBeforeWarning=Be(),this.texData=new e.DataStorage(this,(0,e.engine)())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,n,r){if(((0,e.env)().getBool(\"WEBGL_CHECK_NUMERICAL_PROBLEMS\")||(0,e.env)().getBool(\"DEBUG\"))&&this.checkNumericalProblems(t),\"complex64\"===r&&null!=t)throw new Error(\"Cannot write to a complex64 dtype. Please use tf.complex(real, imag).\");const a={};return this.texData.set(a,{shape:n,dtype:r,values:t,usage:ie.TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0}),a}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(t,n,r,a){if((0,e.env)().getBool(\"DEBUG\")&&this.checkNumericalProblems(n),\"complex64\"===a)throw new Error(\"Cannot write to a complex64 dtype. Please use tf.complex(real, imag).\");this.texData.set(t,{shape:r,dtype:a,values:n,usage:ie.TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(e){const t=e.dataId;if(this.texData.has(t)){const e=this.texData.get(t);e.refCount--,e.refCount<1&&this.disposeData(t)}}readSync(t){const n=this.texData.get(t),{values:r,dtype:a,complexTensorInfos:s,slice:i,shape:o,isPacked:p}=n;if(null!=i){let e;e=p?new he.UnaryOpPackedProgram(o,ue.CLONE):new ue.UnaryOpProgram(o,ue.CLONE);const n=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=r)return this.convertAndCacheOnCPU(t);if(\"string\"===a)return r;const u=null!=this.activeTimers;let h,l;if(u&&(h=e.util.now()),\"complex64\"===a){const t=this.readSync(s.real.dataId),n=this.readSync(s.imag.dataId);l=e.backend_util.mergeRealAndImagArrays(t,n)}else l=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=e.util.now()-h),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const n=this.texData.get(t),{values:r,shape:a,slice:s,dtype:i,complexTensorInfos:o,isPacked:p}=n;if(null!=s){let e;e=p?new he.UnaryOpPackedProgram(a,ue.CLONE):new ue.UnaryOpProgram(a,ue.CLONE);const n=this.runWebGLProgram(e,[{dataId:t,shape:a,dtype:i}],i),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=r)return this.convertAndCacheOnCPU(t);if(!(0,e.env)().getBool(\"WEBGL_DOWNLOAD_FLOAT_ENABLED\")&&2===(0,e.env)().getNumber(\"WEBGL_VERSION\"))throw new Error(\"tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.\");let u,h,l=null;if(\"complex64\"!==i&&(0,e.env)().get(\"WEBGL_BUFFER_SUPPORTED\")){u=this.decode(t);const e=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(e.texture,...ie.getDenseTexShape(a))}if(this.pendingRead.set(t,[]),\"complex64\"!==i&&await this.gpgpu.createAndWaitForFence(),\"complex64\"===i){const t=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),n=t[0],r=t[1];h=e.backend_util.mergeRealAndImagArrays(n,r)}else if(null==l)h=this.getValuesFromTexture(t);else{const t=e.util.sizeFromShape(a);h=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}null!=u&&this.disposeIntermediateTensorInfo(u);const c=this.convertAndCacheOnCPU(t,h),d=this.pendingRead.get(t);return this.pendingRead.delete(t),d.forEach(e=>e(c)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),c}checkNumericalProblems(t){if(null!=t)for(let n=0;n<t.length;n++){const r=t[n];if(!ce.canBeRepresented(r)){if((0,e.env)().getBool(\"WEBGL_RENDER_FLOAT32_CAPABLE\"))throw Error(`The value ${r} cannot be represented with your `+\"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'\");throw Error(`The value ${r} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:n,dtype:r,isPacked:a}=this.texData.get(t),s=e.util.sizeFromShape(n);if((0,e.env)().getBool(\"WEBGL_DOWNLOAD_FLOAT_ENABLED\")){const e=this.decode(t),r=this.texData.get(e.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...ie.getDenseTexShape(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(e),a}const i=(0,e.env)().getBool(\"WEBGL_PACK\")&&!0===a,o=i?ce.getShapeAs3D(n):n,p=i?new w.EncodeFloatPackedProgram(o):new k.EncodeFloatProgram(o),u=this.runWebGLProgram(p,[{shape:o,dtype:r,dataId:t}],\"float32\"),h=this.texData.get(u.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),l}async time(t){const n=this.activeTimers,r=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t();const s=e.util.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=e.util.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=n,a&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if((0,e.env)().getNumber(\"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE\")>0){const t=await Promise.all(s);o.kernelMs=e.util.sum(t),o.getExtraProfileInfo=(()=>t.map((e,t)=>({name:i[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(\", \"))}else o.kernelMs={error:\"WebGL query timers are not supported in this environment.\"};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,e.env)().getNumber(\"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE\")>0?this.gpgpu.beginQuery():{startMs:e.util.now(),endMs:null}}endTimer(t){return(0,e.env)().getNumber(\"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE\")>0?(this.gpgpu.endQuery(),t):(t.endMs=e.util.now(),t)}async getQueryTime(t){if((0,e.env)().getNumber(\"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE\")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(e){if(this.pendingDisposal.has(e))return;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(!this.texData.has(e))return;if(this.texData.get(e).complexParentRefCount>0)return void this.texData.get(e).refCount--;this.releaseGPUData(e);const{complexTensorInfos:t}=this.texData.get(e);null!=t&&(this.texData.get(t.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.real),this.texData.get(t.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.imag)),this.texData.delete(e)}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,p=this.dataRefCount.get(o);p>1?this.dataRefCount.set(o,p-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return(0,e.env)().getBool(\"WEBGL_CPU_FORWARD\")?(null==this.cpuBackend&&(this.cpuBackend=(0,e.engine)().findBackend(\"cpu\")),this.cpuBackend):null}shouldExecuteOnCPU(t,n=we){const r=this.getCPUBackend();return this.warnedAboutCPUBackend||null!=r||(console.warn(\"Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance.\"),this.warnedAboutCPUBackend=!0),null!=r&&t.every(t=>null==this.texData.get(t.dataId).texture&&e.util.sizeFromShape(t.shape)<n)}getGPGPUContext(){return this.gpgpu}slice(n,r,a){if(this.shouldExecuteOnCPU([n])){const e=(0,t.sliceImplCPU)(this.texData.get(n.dataId).values,r,a,n.shape,n.dtype);return this.makeOutput(a,n.dtype,e)}if(0===e.util.sizeFromShape(a))return(0,e.tensor)([],a,n.dtype);const{isPacked:s}=this.texData.get(n.dataId),i=e.slice_util.isSliceContinous(n.shape,r,a);if(s||!i){const t=(0,e.env)().getBool(\"WEBGL_PACK_ARRAY_OPERATIONS\")?new ae.SlicePackedProgram(a):new re.SliceProgram(a),s=t.getCustomSetupFunc(r);return this.compileAndRun(t,[n],null,s)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,a)}shallowSlice(t,n,r){const a=this.texData.get(t.dataId),s=this.makeOutput(r,t.dtype),i=this.texData.get(s.dataId);Object.assign(i,a),i.shape=r,i.dtype=t.dtype;let o=e.slice_util.computeFlatOffset(n,t.strides);a.slice&&(o+=a.slice.flatOffset),i.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||t.dataId};const p=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,p+1),s}stridedSlice(t,n,r,a){const s=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.stridedSlice(t,n,r,a));if(s)return s;const i=e.slice_util.computeOutShape(n,r,a);if(i.some(e=>0===e))return(0,e.tensor)([],i);const o=new se.StridedSliceProgram(n,a,i);return this.compileAndRun(o,[t])}reverse(t,n){const r=(0,e.env)().getBool(\"WEBGL_PACK_ARRAY_OPERATIONS\")?new Z.ReversePackedProgram(t.shape,n):new J.ReverseProgram(t.shape,n);return this.compileAndRun(r,[t])}neg(t){const n=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.neg(t));if(n)return n;if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(t,ue.NEG,t.dtype);const r=new ue.UnaryOpProgram(t.shape,ue.NEG);return this.compileAndRun(r,[t])}batchMatMul(t,n,r,a){const s=r?t.shape[2]:t.shape[1],i=a?n.shape[1]:n.shape[2],o=r?t.shape[1]:t.shape[2],p=Math.max(t.shape[0],n.shape[0]);if((1===s||1===i)&&o>xe){r&&(t=(0,e.transpose)(t,[0,2,1])),a&&(n=(0,e.transpose)(n,[0,2,1]));const s=1===i?t:t.as3D(p,o,1),u=1===i?2:1,h=1===i?n.as3D(p,1,o):n;return e.mul(s,h).sum(u,!0)}const u=(0,e.upcastType)(t.dtype,n.dtype),h=new M.MatMulPackedProgram(t.shape,n.shape,[p,s,i],r,a);return this.compileAndRun(h,[t,n],u)}fusedBatchMatMul({a:t,b:n,transposeA:r,transposeB:a,bias:s,activation:i,preluActivationWeights:o}){const p=r?t.shape[2]:t.shape[1],u=a?n.shape[1]:n.shape[2],h=Math.max(t.shape[0],n.shape[0]),l=(0,e.upcastType)(t.dtype,n.dtype),c=null!=s,d=null!=o,m=i?ke(i,!0):null,g=new M.MatMulPackedProgram(t.shape,n.shape,[h,p,u],r,a,c,m,d),P=[t,n];return s&&P.push(s),o&&P.push(o),this.compileAndRun(g,P,l)}localResponseNormalization4D(t,n,r,a,s){const i=(0,e.env)().getBool(\"WEBGL_PACK_NORMALIZATION\")?new b.LRNPackedProgram(t.shape,n,r,a,s):new v.LRNProgram(t.shape,n,r,a,s);return this.compileAndRun(i,[t])}LRNGrad(e,t,n,r,a,s,i){const o=new U.LRNGradProgram(t.shape,r,a,s,i);return this.compileAndRun(o,[t,n,e])}tile(t,n){if(\"string\"===t.dtype){const r=this.readSync(t.dataId).map(t=>e.util.decodeString(t)),a=(0,e.buffer)(t.shape,t.dtype,r);return Ae(a,n)}const r=new pe.TileProgram(t.shape,n);return this.compileAndRun(r,[t])}pad(t,n,r){const a=(0,e.env)().getBool(\"WEBGL_PACK_ARRAY_OPERATIONS\")?new z.PadPackedProgram(t.shape,n,r):new F.PadProgram(t.shape,n,r);return this.compileAndRun(a,[t])}gather(e,t,n){const r=this.tryRunOnCpuOrThrow([e,t],()=>this.cpuBackend.gather(e,t,n));if(r)return r;const a=new D.GatherProgram(e.shape,t.size,n);return this.compileAndRun(a,[e,t])}batchToSpaceND(t,n,r){e.util.assert(t.rank<=4,()=>\"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet\");const a=n.reduce((e,t)=>e*t),s=e.backend_util.getReshaped(t.shape,n,a),i=e.backend_util.getPermuted(s.length,n.length),o=e.backend_util.getReshapedPermuted(t.shape,n,a),p=e.backend_util.getSliceBeginCoords(r,n.length),u=e.backend_util.getSliceSize(o,r,n.length);return(0,e.transpose)(t.reshape(s),i).reshape(o).slice(p,u)}spaceToBatchND(t,n,r){e.util.assert(t.rank<=4,()=>\"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet\");const a=n.reduce((e,t)=>e*t),s=[[0,0]];s.push(...r);for(let e=1+n.length;e<t.shape.length;++e)s.push([0,0]);const i=t.pad(s),o=e.backend_util.getReshaped(i.shape,n,a,!1),p=e.backend_util.getPermuted(o.length,n.length,!1),u=e.backend_util.getReshapedPermuted(i.shape,n,a,!1),h=(0,e.transpose)(i.reshape(o),p);return(0,e.reshape)(h,u)}reduce(t,n,r){const a=t.shape[0],s=t.shape[1],i=e.backend_util.computeOptimalWindowSize(s),o={windowSize:i,inSize:s,batchSize:a,outSize:Math.ceil(s/i)},p=new H.ReduceProgram(o,n),u=this.compileAndRun(p,[t],r);return 1===u.shape[1]?u:this.reduce(u,n,r)}argReduce(t,n,r=null){let s=t.shape[0],i=t.shape[1];null!=r&&(s=r.shape[0],i=r.shape[1]);const o=e.backend_util.computeOptimalWindowSize(i),p={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},u=new a.ArgMinMaxProgram(p,n,null==r),h=[t];null!=r&&h.push(r);const l=this.compileAndRun(u,h,\"int32\");return 1===l.shape[1]?l:this.argReduce(t,n,l)}argReducePacked(t,n,r=null){const a=null!=r?r.shape:t.shape,i=a[a.length-1],o=e.backend_util.computeOptimalWindowSize(i),p=new s.ArgMinMaxPackedProgram(a,o,n,null==r),u=null==r?[t]:[t,r],h=this.compileAndRun(p,u,\"int32\");return h.rank===t.rank?this.argReducePacked(t,n,h):h}sum(t,n){e.backend_util.assertAxesAreInnerMostDims(\"sum\",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s),o=e.sumOutType(t.dtype);return this.reduce(i,\"sum\",o).reshape(r)}prod(t,n){const r=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.prod(t,n));if(r)return r;const[a,s]=e.backend_util.computeOutAndReduceShapes(t.shape,n),i=e.util.sizeFromShape(s),o=t.as2D(-1,i),p=e.sumOutType(t.dtype);return this.reduce(o,\"prod\",p).reshape(a)}unsortedSegmentSum(t,n,r){let a=0;const s=e.backend_util.getAxesPermutation([a],t.rank);let i=t;null!=s&&(i=(0,e.transpose)(t,s),a=e.backend_util.getInnerMostAxes(1,t.rank)[0]);const o=ge.computeOutShape(i.shape,a,r),p=e.util.sizeFromShape([i.shape[a]]),u=i.as2D(-1,p),h=e.sumOutType(t.dtype);let l=this.segOpCompute(u,\"unsortedSegmentSum\",n,h,r).reshape(o);return null!=s&&(l=(0,e.transpose)(l,e.backend_util.getUndoAxesPermutation(s))),l}segOpCompute(t,n,r,a,s){const i=t.shape[0],o=t.shape[1],p=ge.segOpComputeOptimalWindowSize(o,s),u={windowSize:p,inSize:o,batchSize:i,numSegments:s},h=new te.SegmentOpProgram(u,n),l=this.compileAndRun(h,[t,r],a);return l.shape[1]===s?l:(r=(0,e.range)(0,s).tile([o/p]),this.segOpCompute(l,n,r,a,s))}argMinMaxReduce(t,n,r){const a=[n];if(e.backend_util.assertAxesAreInnerMostDims(\"arg\"+r.charAt(0).toUpperCase()+r.slice(1),a,t.rank),!(0,e.env)().getBool(\"WEBGL_PACK_REDUCE\")||t.rank<=2){const[n,s]=e.backend_util.computeOutAndReduceShapes(t.shape,a),i=e.util.sizeFromShape(s),o=t.as2D(-1,i);return this.argReduce(o,r).reshape(n)}return this.argReducePacked(t,r)}argMin(e,t){return this.argMinMaxReduce(e,t,\"min\")}argMax(e,t){return this.argMinMaxReduce(e,t,\"max\")}cumsum(e,t,n,r){if(t!==e.rank-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${e.rank-1} `+`but got axis=${t}`);const a=e.shape[t];let s=e;for(let i=0;i<=Math.ceil(Math.log2(a))-1;i++){const t=new R.CumSumProgram(e.shape,!1,r),n=t.getCustomSetupFunc(i),a=s;s=this.compileAndRun(t,[s],s.dtype,n),a.dispose()}if(n){const t=new R.CumSumProgram(e.shape,n,r),a=s;s=this.compileAndRun(t,[s]),a.dispose()}return s}equal(t,n){if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.EQUAL,\"bool\");const r=new o.BinaryOpProgram(o.EQUAL,t.shape,n.shape);return this.compileAndRun(r,[t,n],\"bool\")}less(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.less(t,n));if(r)return r;if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.LESS,\"bool\");const a=new o.BinaryOpProgram(o.LESS,t.shape,n.shape);return this.compileAndRun(a,[t,n],\"bool\")}lessEqual(t,n){if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.LESS_EQUAL,\"bool\");const r=new o.BinaryOpProgram(o.LESS_EQUAL,t.shape,n.shape);return this.compileAndRun(r,[t,n],\"bool\")}greater(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.greater(t,n));if(r)return r;if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.GREATER,\"bool\");const a=new o.BinaryOpProgram(o.GREATER,t.shape,n.shape);return this.compileAndRun(a,[t,n],\"bool\")}greaterEqual(t,n){if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.GREATER_EQUAL,\"bool\");const r=new o.BinaryOpProgram(o.GREATER_EQUAL,t.shape,n.shape);return this.compileAndRun(r,[t,n],\"bool\")}logicalNot(e){const t=new ue.UnaryOpProgram(e.shape,ue.LOGICAL_NOT);return this.compileAndRun(t,[e])}logicalAnd(t,n){if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.LOGICAL_AND,\"bool\");const r=new o.BinaryOpProgram(o.LOGICAL_AND,t.shape,n.shape);return this.compileAndRun(r,[t,n],\"bool\")}logicalOr(t,n){if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.LOGICAL_OR,\"bool\");const r=new o.BinaryOpProgram(o.LOGICAL_OR,t.shape,n.shape);return this.compileAndRun(r,[t,n],\"bool\")}select(t,n,r){const a=new ne.SelectProgram(t.rank,n.shape,n.rank);return this.compileAndRun(a,[t,n,r],(0,e.upcastType)(n.dtype,r.dtype))}where(t){e.backend_util.warn(\"tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead\");const n=t.dataSync();return Re(t.shape,n)}topk(e,t,n){const r=e.dataSync();return _e(r,e.shape,e.dtype,t,n)}min(t,n){e.backend_util.assertAxesAreInnerMostDims(\"min\",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s);return this.reduce(i,\"min\",i.dtype).reshape(r)}minimum(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.minimum(t,n));if(r)return r;const a=(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")?new p.BinaryOpPackedProgram(p.MIN,t.shape,n.shape):new o.BinaryOpProgram(o.MIN,t.shape,n.shape);return this.compileAndRun(a,[t,n])}mod(t,n){const r=(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")?new p.BinaryOpPackedProgram(p.MOD,t.shape,n.shape):new o.BinaryOpProgram(o.MOD,t.shape,n.shape);return this.compileAndRun(r,[t,n])}maximum(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.maximum(t,n));if(r)return r;const a=(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")?new p.BinaryOpPackedProgram(p.MAX,t.shape,n.shape):new o.BinaryOpProgram(o.MAX,t.shape,n.shape);return this.compileAndRun(a,[t,n])}all(t,n){e.backend_util.assertAxesAreInnerMostDims(\"all\",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s);return this.reduce(i,\"all\",i.dtype).reshape(r)}any(t,n){e.backend_util.assertAxesAreInnerMostDims(\"any\",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s);return this.reduce(i,\"any\",i.dtype).reshape(r)}floorDiv(t,n){const r=o.INT_DIV;if((0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\"))return this.packedBinaryOp(t,n,p.INT_DIV,\"int32\");const a=new o.BinaryOpProgram(r,t.shape,n.shape);return this.compileAndRun(a,[t,n],\"int32\")}packedUnaryOp(e,t,n){const r=new he.UnaryOpPackedProgram(e.shape,t);return this.compileAndRun(r,[e],n)}packedBinaryOp(e,t,n,r,a=!1){const s=new p.BinaryOpPackedProgram(n,e.shape,t.shape,a);return this.compileAndRun(s,[e,t],r)}makeComplexComponentTensorInfo(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}addN(t){if(1===t.length)return t[0];if(t.length>(0,e.env)().get(\"WEBGL_MAX_TEXTURES_IN_SHADER\")){const e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}const a=t.map(e=>e.dtype).reduce((t,n)=>(0,e.upcastType)(t,n)),s=t.map(e=>e.shape),i=(0,e.env)().getBool(\"WEBGL_PACK\")?new r.AddNPackedProgram(t[0].shape,s):new n.AddNProgram(t[0].shape,s);return this.compileAndRun(i,t,a)}pow(t,n){const r=(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")?new p.BinaryOpPackedProgram(p.POW,t.shape,n.shape):new o.BinaryOpProgram(o.POW,t.shape,n.shape),a=(0,e.upcastType)(t.dtype,n.dtype);return this.compileAndRun(r,[t,n],a)}ceil(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.ceilImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(n,ue.CEIL,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.CEIL);return this.compileAndRun(r,[n])}floor(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.floorImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(n,ue.FLOOR,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.FLOOR);return this.compileAndRun(r,[n])}sign(e){const t=new ue.UnaryOpProgram(e.shape,ue.SIGN);return this.compileAndRun(t,[e])}isNaN(e){const t=new ue.UnaryOpProgram(e.shape,ue.IS_NAN);return this.compileAndRun(t,[e],\"bool\")}isInf(e){const t=new ue.UnaryOpProgram(e.shape,ue.IS_INF);return this.compileAndRun(t,[e],\"bool\")}isFinite(e){const t=new ue.UnaryOpProgram(e.shape,ue.IS_FINITE);return this.compileAndRun(t,[e],\"bool\")}round(e){const t=new ue.UnaryOpProgram(e.shape,ue.ROUND);return this.compileAndRun(t,[e])}exp(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.expImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(n,ue.EXP,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.EXP);return this.compileAndRun(r,[n])}expm1(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.expm1ImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(n,ue.EXPM1,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.EXPM1);return this.compileAndRun(r,[n])}softmax(t,n){const r=e.util.parseAxisParam([n],t.shape),a=(0,e.max)(t,r),s=e.backend_util.expandShapeToKeepDim(a.shape,r),i=e.sub(t,a.reshape(s)),o=this.exp(i),p=this.sum(o,r).reshape(s);return(0,e.div)(o,p)}log(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.logImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(n,he.LOG,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.LOG);return this.compileAndRun(r,[n])}log1p(e){const t=new ue.UnaryOpProgram(e.shape,ue.LOG1P);return this.compileAndRun(t,[e])}sqrt(e){const t=new ue.UnaryOpProgram(e.shape,ue.SQRT);return this.compileAndRun(t,[e])}rsqrt(e){if(this.shouldExecuteOnCPU([e])){const n=(0,t.rsqrtImplCPU)(this.texData.get(e.dataId).values,e.dtype);return this.makeOutput(e.shape,e.dtype,n)}const n=new ue.UnaryOpProgram(e.shape,ue.RSQRT);return this.compileAndRun(n,[e])}reciprocal(e){const t=new ue.UnaryOpProgram(e.shape,ue.RECIPROCAL);return this.compileAndRun(t,[e])}relu(t){let n;return n=(0,e.env)().getBool(\"WEBGL_PACK\")?new he.UnaryOpPackedProgram(t.shape,he.RELU):new ue.UnaryOpProgram(t.shape,ue.RELU),this.compileAndRun(n,[t])}relu6(t){let n;return n=(0,e.env)().getBool(\"WEBGL_PACK\")?new he.UnaryOpPackedProgram(t.shape,he.RELU6):new ue.UnaryOpProgram(t.shape,ue.RELU6),this.compileAndRun(n,[t])}prelu(t,n){const r=(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")?new p.BinaryOpPackedProgram(p.PRELU,t.shape,n.shape):new o.BinaryOpProgram(o.PRELU,t.shape,n.shape);return this.compileAndRun(r,[t,n])}elu(t){if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(t,he.ELU,t.dtype);const n=new ue.UnaryOpProgram(t.shape,ue.ELU);return this.compileAndRun(n,[t])}eluDer(t,n){const r=(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")?new p.BinaryOpPackedProgram(p.ELU_DER,t.shape,n.shape):new o.BinaryOpProgram(o.ELU_DER,t.shape,n.shape);return this.compileAndRun(r,[t,n])}selu(e){const t=new ue.UnaryOpProgram(e.shape,ue.SELU);return this.compileAndRun(t,[e])}clip(t,n,r){let a;const s=(a=(0,e.env)().getBool(\"WEBGL_PACK_CLIP\")?new l.ClipPackedProgram(t.shape):new h.ClipProgram(t.shape)).getCustomSetupFunc(n,r);return this.compileAndRun(a,[t],null,s)}abs(n){if(this.shouldExecuteOnCPU([n])&&\"complex64\"!==n.dtype){const e=(0,t.simpleAbsImplCPU)(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool(\"WEBGL_PACK_UNARY_OPERATIONS\"))return this.packedUnaryOp(n,ue.ABS,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.ABS);return this.compileAndRun(r,[n])}complexAbs(e){const t=this.texData.get(e.dataId),n=new c.ComplexAbsProgram(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensorInfos.real),this.makeComplexComponentTensorInfo(e,t.complexTensorInfos.imag)];return this.compileAndRun(n,r)}sigmoid(e){const t=new ue.UnaryOpProgram(e.shape,ue.SIGMOID);return this.compileAndRun(t,[e])}softplus(e){const t=new ue.UnaryOpProgram(e.shape,ue.SOFTPLUS);return this.compileAndRun(t,[e])}asin(e){const t=new ue.UnaryOpProgram(e.shape,ue.ASIN);return this.compileAndRun(t,[e])}acos(e){const t=new ue.UnaryOpProgram(e.shape,ue.ACOS);return this.compileAndRun(t,[e])}atan(e){const t=new ue.UnaryOpProgram(e.shape,ue.ATAN);return this.compileAndRun(t,[e])}sinh(e){const t=new ue.UnaryOpProgram(e.shape,ue.SINH);return this.compileAndRun(t,[e])}cosh(e){const t=new ue.UnaryOpProgram(e.shape,ue.COSH);return this.compileAndRun(t,[e])}tanh(e){const t=new ue.UnaryOpProgram(e.shape,ue.TANH);return this.compileAndRun(t,[e])}asinh(e){const t=new ue.UnaryOpProgram(e.shape,ue.ASINH);return this.compileAndRun(t,[e])}acosh(e){const t=new ue.UnaryOpProgram(e.shape,ue.ACOSH);return this.compileAndRun(t,[e])}atanh(e){const t=new ue.UnaryOpProgram(e.shape,ue.ATANH);return this.compileAndRun(t,[e])}erf(e){const t=new ue.UnaryOpProgram(e.shape,ue.ERF);return this.compileAndRun(t,[e])}step(e,t){const n=new ue.UnaryOpProgram(e.shape,ue.STEP(t));return this.compileAndRun(n,[e])}conv2dByMatMul(t,n,r,a,s,i){const o=t.shape,p=this.texData.get(t.dataId),u=r.inChannels,h=o[0]*o[1]*o[2],l=r.outChannels,c=\"channelsLast\"===r.dataFormat,d=(1===h||1===l)&&u>xe,m=o[2]%2!=0&&!!p.isPacked;if(d||!(0,e.env)().getBool(\"WEBGL_LAZILY_UNPACK\")||!(0,e.env)().getBool(\"WEBGL_PACK_BINARY_OPERATIONS\")||!m){const p=c?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],u=(0,e.reshape)(t,[1,p,r.inChannels]),h=(0,e.reshape)(n,[1,r.inChannels,r.outChannels]),l=this.fusedBatchMatMul({a:u,b:h,transposeA:!1,transposeB:!1,bias:a,activation:s,preluActivationWeights:i});return(0,e.reshape)(l,r.outShape)}const g=c?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),P={dataId:t.dataId,shape:[1,g,r.inChannels],dtype:t.dtype},A=p.shape;p.shape=p.shape.slice(),p.shape[p.shape.length-2]++,e.util.assert(ce.isReshapeFree(p.shape,P.shape),()=>`packed reshape ${p.shape} to ${P.shape} isn't free`);const _=(0,e.reshape)(n,[1,r.inChannels,r.outChannels]),R=this.fusedBatchMatMul({a:P,b:_,transposeA:!1,transposeB:!1,bias:a,activation:s,preluActivationWeights:i}),O=this.texData.get(R.dataId);return e.util.assert(O.isPacked,()=>\"batchMatMul result is expected to be packed\"),p.shape=A,O.shape=r.outShape,(0,e.engine)().makeTensorFromDataId(R.dataId,r.outShape,R.dtype)}conv2dWithIm2Row(e,t,n,r,a,s){const{filterWidth:i,filterHeight:o,inChannels:p,outWidth:u,outHeight:h,dataFormat:l}=n,c=\"channelsLast\"===l,d=i*o*p,m=h*u,g=[d,m],P=e.squeeze([0]),A=t.reshape([1,d,-1]),_=new T.Im2ColPackedProgram(g,P.shape,n),R=this.compileAndRun(_,[P]).reshape([1,g[0],g[1]]),O=null!=r,y=null!=s,f=a?ke(a,!0):null,I=new M.MatMulPackedProgram(R.shape,A.shape,[1,m,n.outChannels],!0,!1,O,f,y),k=[R,A];r&&k.push(r),y&&k.push(s);const w=this.compileAndRun(I,k);return c?w.reshape([1,h,u,n.outChannels]):w.reshape([1,n.outChannels,h,u])}fusedConv2d({input:t,filter:n,convInfo:r,bias:a,activation:s,preluActivationWeights:i}){if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&(\"SAME\"===r.padInfo.type||\"VALID\"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,s,i);if((0,e.env)().getBool(\"WEBGL_CONV_IM2COL\")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,s,i);const o=null!=a,p=null!=i,u=s?ke(s,!1):null,h=new g.Conv2DProgram(r,o,u,p),l=[t,n];return a&&l.push(a),i&&l.push(i),this.compileAndRun(h,l)}conv2d(t,n,r){if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&(\"SAME\"===r.padInfo.type||\"VALID\"===r.padInfo.type))return this.conv2dByMatMul(t,n,r);if((0,e.env)().getBool(\"WEBGL_CONV_IM2COL\")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r);const a=new g.Conv2DProgram(r);return this.compileAndRun(a,[t,n])}conv2dDerInput(e,t,n){const r=new d.Conv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])}conv2dDerFilter(e,t,n){const r=new d.Conv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])}fusedDepthwiseConv2D({input:t,filter:n,convInfo:r,bias:a,activation:s,preluActivationWeights:i}){const o=(0,e.env)().getBool(\"WEBGL_PACK_DEPTHWISECONV\")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1,p=s?ke(s,o):null,u=[t,n],h=null!=a,l=null!=i;let c;return h&&u.push(a),l&&u.push(i),o?(c=new A.DepthwiseConvPacked2DProgram(r,h,p,l),this.compileAndRun(c,u)):(c=new P.DepthwiseConv2DProgram(r,h,p,l),this.compileAndRun(c,u))}depthwiseConv2D(t,n,r){let a;return(0,e.env)().getBool(\"WEBGL_PACK_DEPTHWISECONV\")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(a=new A.DepthwiseConvPacked2DProgram(r),this.compileAndRun(a,[t,n])):(a=new P.DepthwiseConv2DProgram(r),this.compileAndRun(a,[t,n]))}depthwiseConv2DDerInput(e,t,n){const r=new m.DepthwiseConv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])}depthwiseConv2DDerFilter(e,t,n){const r=new m.DepthwiseConv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])}conv3d(e,t,n){const r=new g.Conv3DProgram(n);return this.compileAndRun(r,[e,t])}conv3dDerInput(e,t,n){const r=new d.Conv3DDerInputProgram(n);return this.compileAndRun(r,[e,t])}conv3dDerFilter(e,t,n){const r=new d.Conv3DDerFilterProgram(n);return this.compileAndRun(r,[e,t])}unstack(e,t){const n=e.shape[t],r=new Array(e.rank-1);let a=0;for(let p=0;p<e.rank;p++)p!==t&&(r[a++]=e.shape[p]);const s=new Array(e.rank).fill(0),i=e.shape.slice();i[t]=1;const o=new Array(n);for(let p=0;p<o.length;p++)s[t]=p,o[p]=this.slice(e,s,i).reshape(r);return o}avgPool3d(e,t){const n=new K.Pool3DProgram(t,\"avg\",!1);return this.compileAndRun(n,[e],\"float32\")}avgPool3dBackprop(e,t,n){const r=new i.AvgPool3DBackpropProgram(n);return this.compileAndRun(r,[e],t.dtype)}maxPool3d(e,t){const n=new K.Pool3DProgram(t,\"max\",!1);return this.compileAndRun(n,[e],\"float32\")}maxPool3dBackprop(e,t,n,r){const a=new K.Pool3DProgram(r,\"max\",!0),s=this.compileAndRun(a,[t]),i=new N.MaxPool3DBackpropProgram(r),o=this.compileAndRun(i,[e,s],t.dtype);return s.dispose(),o}resizeBilinear(t,n,r,a){const s=(0,e.env)().getBool(\"WEBGL_PACK_IMAGE_OPERATIONS\")?new X.ResizeBilinearPackedProgram(t.shape,n,r,a):new Q.ResizeBilinearProgram(t.shape,n,r,a);return this.compileAndRun(s,[t],\"float32\")}resizeBilinearBackprop(e,t,n){const r=new V.ResizeBilinearBackpropProgram(e,t,n);return this.compileAndRun(r,[e])}resizeNearestNeighbor(e,t,n,r){const a=new $.ResizeNearestNeighborProgram(e.shape,t,n,r);return this.compileAndRun(a,[e])}resizeNearestNeighborBackprop(e,t,n){const r=new j.ResizeNearestNeigborBackpropProgram(e,t,n);return this.compileAndRun(r,[e])}multinomial(t,n,r,a){const s=n?t:(0,e.softmax)(t),i=s.shape[0],o=s.shape[1],p=new W.MultinomialProgram(i,o,r),u=p.getCustomSetupFunc(a);return this.compileAndRun(p,[s],\"int32\",u)}oneHot(e,t,n,r){const a=new G.OneHotProgram(e.size,t,n,r);return this.compileAndRun(a,[e])}diag(e){const t=new I.DiagProgram(e.size);return this.compileAndRun(t,[e])}cropAndResize(e,t,n,r,a,s){const i=new _.CropAndResizeProgram(e.shape,t.shape,r,a,s);return this.compileAndRun(i,[e,t,n],\"float32\")}depthToSpace(t,n,r){e.util.assert(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`);const a=t.shape[0],s=\"NHWC\"===r?t.shape[1]:t.shape[2],i=\"NHWC\"===r?t.shape[2]:t.shape[3],o=\"NHWC\"===r?t.shape[3]:t.shape[1],p=s*n,u=i*n,h=o/(n*n),l=\"NHWC\"===r?[a,p,u,h]:[a,h,p,u],c=new f.DepthToSpaceProgram(l,n,r);return this.compileAndRun(c,[t])}split(e,t,n){return Pe(e,t,n)}scatterND(t,n,r){const{sliceRank:a,numUpdates:s,sliceSize:i,strides:o,outputSize:p}=e.backend_util.calculateShapes(n,t,r),u=[p/i,i],h=t.reshape([s,a]),l=n.reshape([s,i]);if(0===p)return e.backend_util.reshapeTensor((0,e.tensor)([]),r);const c=(0,e.scalar)(0),d=new ee.ScatterProgram(s,a,h.rank,l.rank,o,u);return this.compileAndRun(d,[l,h,c]).reshape(r)}sparseToDense(t,n,r,a){const{sliceRank:s,numUpdates:i,strides:o,outputSize:p}=e.backend_util.calculateShapes(n,t,r),u=new ee.ScatterProgram(i,s,t.rank,n.rank,o,[p,1],!1);return this.compileAndRun(u,[n,t,a]).reshape(r)}gatherND(t,n){const r=n.shape,a=r[r.length-1],[s,i,o,p]=e.backend_util.prepareAndValidate(t,n),u=n.reshape([i,a]),h=t.reshape([t.size/o,o]),l=new C.GatherNDProgram(a,p,[i,o]);return this.compileAndRun(l,[h,u]).reshape(s)}fill(t,n,r){if(\"string\"===(r=r||e.util.inferDtype(n))){const a=e.util.getArrayFromDType(r,e.util.sizeFromShape(t));return a.fill(n),(0,e.engine)().makeTensor(a,t,r,this)}{const e=new x.FillProgram(t,n),a=e.getCustomSetupFunc(n);return this.compileAndRun(e,[],r,a)}}onesLike(e){if(\"string\"===e.dtype)throw new Error(\"onesLike is not supported under string dtype\");return this.fill(e.shape,1,e.dtype)}zerosLike(e){return this.fill(e.shape,\"string\"===e.dtype?\"\":0,e.dtype)}linspace(t,n,r){return e.backend_util.linspaceImpl(t,n,r)}makeTensorInfo(e,t,n){const r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(t,n,r){const{dataId:a}=this.makeTensorInfo(t,n,r);return(0,e.engine)().makeTensorFromDataId(a,t,n,this)}unpackTensor(e){const t=new le.UnpackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new q.PackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[ce.getBatchDim(e.shape),...ce.getRowsCols(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ce.getBatchDim(t),...ce.getRowsCols(t)],s=new Y.ReshapePackedProgram(a,n),i=this.runWebGLProgram(s,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:a}=t,s=ce.getShapeAs3D(r);let i;i=n?new y.DecodeMatrixPackedProgram(s):new O.DecodeMatrixProgram(s);return{dtype:a,shape:r,dataId:this.runWebGLProgram(i,[{shape:s,dtype:a,dataId:e}],a,null,!0).dataId}}runWebGLProgram(t,n,r,a,s=!1){const i=this.makeTensorInfo(t.outputShape,r),o=this.texData.get(i.dataId);if(t.packedOutput&&(o.isPacked=!0),t.outPackingScheme===ie.PackingScheme.DENSE){const e=ie.getDenseTexShape(t.outputShape);o.texShape=e.map(e=>2*e)}if(null!=t.outTexUsage&&(o.usage=t.outTexUsage),0===e.util.sizeFromShape(i.shape))return o.values=e.util.getTypedArrayFromDType(i.dtype,0),i;const p=[],u=n.map(n=>{if(\"complex64\"===n.dtype)throw new Error(\"GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.\");let r=this.texData.get(n.dataId);if(null==r.texture){if(!t.packedInputs&&e.util.sizeFromShape(n.shape)<=(0,e.env)().getNumber(\"WEBGL_SIZE_UPLOAD_UNIFORM\"))return{shape:n.shape,texData:null,isUniform:!0,uniformValues:r.values};t.packedInputs&&(r.isPacked=!0,r.shape=n.shape)}else if(!!r.isPacked!=!!t.packedInputs)n=r.isPacked?this.unpackTensor(n):this.packTensor(n),p.push(n),r=this.texData.get(n.dataId);else if(r.isPacked&&!ce.isReshapeFree(r.shape,n.shape)){const e=n,t=n.shape;n.shape=r.shape,n=this.packedReshape(n,t),p.push(n),r=this.texData.get(n.dataId),e.shape=t}return this.uploadToGPU(n.dataId),{shape:n.shape,texData:r,isUniform:!1}});this.uploadToGPU(i.dataId);const h={shape:i.shape,texData:o,isUniform:!1},l=L.makeShaderKey(t,u,h),c=this.getAndSaveBinary(l,()=>L.compileProgram(this.gpgpu,t,u,h)),d=null!=this.activeTimers;let m;if(d&&(m=this.startTimer()),L.runProgram(this.gpgpu,c,u,h,a),p.forEach(e=>this.disposeIntermediateTensorInfo(e)),d&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)})),!(0,e.env)().getBool(\"WEBGL_LAZILY_UNPACK\")&&o.isPacked&&!1===s){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(t,n,r,a,s=!1){r=r||n[0].dtype;const i=this.runWebGLProgram(t,n,r,a,s);return(0,e.engine)().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,e.env)().getBool(\"IS_TEST\")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&\"undefined\"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,e.tidy)(()=>{if(!(0,e.env)().get(\"WEBGL_RENDER_FLOAT32_ENABLED\")){const t=(0,e.env)().getBool(\"DEBUG\");(0,e.env)().set(\"DEBUG\",!1);const n=this.abs((0,e.scalar)(1e-8)).dataSync()[0];if((0,e.env)().set(\"DEBUG\",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?Oe:ye}uploadToGPU(t){const n=this.texData.get(t),{shape:r,dtype:a,values:s,texture:i,usage:o,isPacked:p}=n;if(null!=i)return;const u=null!=this.activeTimers;let h;u&&(h=e.util.now());let l=n.texShape;if(null==l&&(l=ce.getTextureShapeFromLogicalShape(r,p),n.texShape=l),null!=s){const t=ce.getShapeAs3D(r);let i,o=l[1],c=l[0];const d=s instanceof Uint8Array;p?([o,c]=ie.getPackedMatrixTextureShapeWidthHeight(l[0],l[1]),i=new B.EncodeMatrixPackedProgram(t,[c,o],d)):i=new E.EncodeMatrixProgram(t,[c,o],d);const m=this.makeTensorInfo([c,o],a);this.texData.get(m.dataId).usage=d?ie.TextureUsage.PIXELS:ie.TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(m.dataId),o,c,s);const g=!0,P=this.runWebGLProgram(i,[m],a,null,g),A=this.texData.get(P.dataId);n.texture=A.texture,n.texShape=A.texShape,n.isPacked=A.isPacked,n.usage=A.usage,this.disposeIntermediateTensorInfo(m),this.texData.delete(P.dataId),n.values=null,u&&(this.uploadWaitMs+=e.util.now()-h)}else{const e=this.acquireTexture(l,o,a,p);n.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=Ce(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, `+\"most likely due to a memory leak\")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(t,n){return t[0]*t[1]*e.util.bytesPerElement(n)}tryRunOnCpuOrThrow(t,n){if(this.shouldExecuteOnCPU(t))try{return n()}catch(r){if((0,e.env)().getBool(\"IS_TEST\"))throw new Error(\"CPU forwarding failed\")}return null}}function Ce(e,t){if(\"float32\"===t||\"complex64\"===t)return e;if(\"int32\"===t||\"bool\"===t){const n=\"int32\"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}exports.MathBackendWebGL=De;"},"sourceMaps":null,"error":null,"hash":"00dc5a2879c3db4d64f2167b06fddb2f","cacheData":{"env":{}}}