{"id":"zxzS","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/src/optimizers/optimizer.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609563562293},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../globals","loc":{"line":17,"column":24},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../gradients","loc":{"line":18,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/gradients.js"},{"name":"../ops/ops","loc":{"line":19,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/ops.js"},{"name":"../serialization","loc":{"line":20,"column":29},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/serialization.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Optimizer=void 0;var e=require(\"../globals\"),t=require(\"../gradients\"),i=require(\"../ops/ops\"),s=require(\"../serialization\");class r extends s.Serializable{minimize(t,i=!1,s){const{value:r,grads:n}=this.computeGradients(t,s);if(null!=s){const e=s.map(e=>({name:e.name,tensor:n[e.name]}));this.applyGradients(e)}else this.applyGradients(n);return(0,e.dispose)(n),i?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,i){return(0,t.variableGrads)(e,i)}dispose(){null!=this.iterations_&&(0,e.dispose)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:\"iter\",tensor:(0,i.scalar)(this.iterations_,\"int32\")}}async getWeights(){throw new Error(\"getWeights() is not implemented for this optimizer yet.\")}async setWeights(e){throw new Error(\"setWeights() is not implemented for this optimizer class \"+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}exports.Optimizer=r,Object.defineProperty(r,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":91}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":93}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":97}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":99}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":107}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":121}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":123}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":131}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":147}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":149}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":157}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":171}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":173}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":181}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":1,"column":201}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":42,"column":22},"generated":{"line":1,"column":207}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":42,"column":40},"generated":{"line":1,"column":217}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":1,"column":219}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":232}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":241}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":59,"column":28},"generated":{"line":1,"column":243}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":59,"column":41},"generated":{"line":1,"column":246}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":59,"column":48},"generated":{"line":1,"column":248}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":251}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":257}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":263}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":265}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":18},"generated":{"line":1,"column":271}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":27},"generated":{"line":1,"column":274}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":32},"generated":{"line":1,"column":279}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":49},"generated":{"line":1,"column":296}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":61,"column":52},"generated":{"line":1,"column":298}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":301}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":63,"column":19},"generated":{"line":1,"column":304}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":310}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":63,"column":25},"generated":{"line":1,"column":312}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":313}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":319}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":1,"column":321}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":18},"generated":{"line":1,"column":323}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":22},"generated":{"line":1,"column":327}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":28},"generated":{"line":1,"column":331}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":29},"generated":{"line":1,"column":332}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":35},"generated":{"line":1,"column":337}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":37},"generated":{"line":1,"column":339}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":43},"generated":{"line":1,"column":344}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":51},"generated":{"line":1,"column":351}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":57},"generated":{"line":1,"column":353}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":65,"column":59},"generated":{"line":1,"column":355}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":66,"column":11},"generated":{"line":1,"column":364}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":66,"column":11},"generated":{"line":1,"column":369}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":66,"column":26},"generated":{"line":1,"column":384}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":392}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":397}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":68,"column":26},"generated":{"line":1,"column":412}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":74,"column":8},"generated":{"line":1,"column":415}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":422}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":424}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":426}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":435}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":74,"column":8},"generated":{"line":1,"column":438}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":75,"column":13},"generated":{"line":1,"column":440}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":443}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":1,"column":445}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":78,"column":13},"generated":{"line":1,"column":455}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":85,"column":6},"generated":{"line":1,"column":461}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":89,"column":11},"generated":{"line":1,"column":478}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":86,"column":28},"generated":{"line":1,"column":485}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":491}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":1,"column":496}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":87,"column":11},"generated":{"line":1,"column":510}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":87,"column":11},"generated":{"line":1,"column":515}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":87,"column":25},"generated":{"line":1,"column":527}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":89,"column":11},"generated":{"line":1,"column":530}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":89,"column":16},"generated":{"line":1,"column":535}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":92,"column":12},"generated":{"line":1,"column":547}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":93,"column":9},"generated":{"line":1,"column":569}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":93,"column":9},"generated":{"line":1,"column":574}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":93,"column":23},"generated":{"line":1,"column":586}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":93,"column":28},"generated":{"line":1,"column":591}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":93,"column":41},"generated":{"line":1,"column":602}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":1,"column":604}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":109,"column":19},"generated":{"line":1,"column":621}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":109,"column":36},"generated":{"line":1,"column":623}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":111,"column":11},"generated":{"line":1,"column":626}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":111,"column":11},"generated":{"line":1,"column":633}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":111,"column":25},"generated":{"line":1,"column":635}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":111,"column":25},"generated":{"line":1,"column":637}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":111,"column":25},"generated":{"line":1,"column":652}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":111,"column":28},"generated":{"line":1,"column":654}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":127,"column":2},"generated":{"line":1,"column":657}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":128,"column":28},"generated":{"line":1,"column":667}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":128,"column":8},"generated":{"line":1,"column":673}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":128,"column":13},"generated":{"line":1,"column":678}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":129,"column":14},"generated":{"line":1,"column":692}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":129,"column":14},"generated":{"line":1,"column":694}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":129,"column":14},"generated":{"line":1,"column":696}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":129,"column":14},"generated":{"line":1,"column":705}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":129,"column":19},"generated":{"line":1,"column":710}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":133,"column":8},"generated":{"line":1,"column":723}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":137,"column":11},"generated":{"line":1,"column":746}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":134,"column":28},"generated":{"line":1,"column":753}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":134,"column":8},"generated":{"line":1,"column":759}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":134,"column":13},"generated":{"line":1,"column":764}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":135,"column":11},"generated":{"line":1,"column":778}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":135,"column":11},"generated":{"line":1,"column":783}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":135,"column":25},"generated":{"line":1,"column":795}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":137,"column":11},"generated":{"line":1,"column":798}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":138,"column":6},"generated":{"line":1,"column":799}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":138,"column":12},"generated":{"line":1,"column":804}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":6},"generated":{"line":1,"column":811}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":14},"generated":{"line":1,"column":819}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":21},"generated":{"line":1,"column":821}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":21},"generated":{"line":1,"column":823}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":21},"generated":{"line":1,"column":831}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":26},"generated":{"line":1,"column":836}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":140,"column":39},"generated":{"line":1,"column":848}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":144,"column":8},"generated":{"line":1,"column":858}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":145,"column":10},"generated":{"line":1,"column":877}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":145,"column":10},"generated":{"line":1,"column":883}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":145,"column":14},"generated":{"line":1,"column":887}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":145,"column":20},"generated":{"line":1,"column":893}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":148,"column":8},"generated":{"line":1,"column":952}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":148,"column":19},"generated":{"line":1,"column":969}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":149,"column":10},"generated":{"line":1,"column":972}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":149,"column":10},"generated":{"line":1,"column":978}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":149,"column":14},"generated":{"line":1,"column":982}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":150,"column":8},"generated":{"line":1,"column":988}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":151,"column":11},"generated":{"line":1,"column":1051}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":151,"column":16},"generated":{"line":1,"column":1056}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":161,"column":18},"generated":{"line":1,"column":1074}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":161,"column":36},"generated":{"line":1,"column":1098}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":164,"column":11},"generated":{"line":1,"column":1101}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":9},"generated":{"line":1,"column":1108}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":9},"generated":{"line":1,"column":1113}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":30},"generated":{"line":1,"column":1132}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":43},"generated":{"line":1,"column":1134}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":46},"generated":{"line":1,"column":1137}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":53},"generated":{"line":1,"column":1144}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":163,"column":61},"generated":{"line":1,"column":1152}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":164,"column":11},"generated":{"line":1,"column":1155}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":164,"column":24},"generated":{"line":1,"column":1157}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":164,"column":30},"generated":{"line":1,"column":1163}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":1167}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":1175}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":1185}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":0},"generated":{"line":1,"column":1187}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":7},"generated":{"line":1,"column":1194}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":22},"generated":{"line":1,"column":1209}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":33},"generated":{"line":1,"column":1211}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":40},"generated":{"line":1,"column":1218}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":168,"column":53},"generated":{"line":1,"column":1230}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":169,"column":2},"generated":{"line":1,"column":1231}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":169,"column":10},"generated":{"line":1,"column":1237}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":170,"column":32},"generated":{"line":1,"column":1240}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":170,"column":11},"generated":{"line":1,"column":1246}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":170,"column":20},"generated":{"line":1,"column":1248}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":170,"column":69},"generated":{"line":1,"column":1258}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":170,"column":40},"generated":{"line":1,"column":1264}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":170,"column":49},"generated":{"line":1,"column":1266}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":171,"column":35},"generated":{"line":1,"column":1284}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":171,"column":8},"generated":{"line":1,"column":1290}},{"source":"../../src/optimizers/optimizer.ts","name":null,"original":{"line":171,"column":17},"generated":{"line":1,"column":1292}}],"sources":{"../../src/optimizers/optimizer.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {dispose} from '../globals';\nimport {variableGrads} from '../gradients';\nimport {scalar} from '../ops/ops';\nimport {Serializable} from '../serialization';\nimport {Scalar, Variable} from '../tensor';\nimport {NamedTensor, NamedTensorMap} from '../tensor_types';\n\n/**\n * A variable that belongs to an optimizer.\n *\n * The `originalName` field is required for keeping track of the canonical\n * name of the variable, which is usually the name of the model weight that\n * the variable is related to plus a suffix, e.g., 'dense1/kernel/momentum'.\n * The name of the `Variable` object itself cannot be used directly due to\n * possible deduplication: Every `Variable` must have a unique name but more\n * than one optimizer objects of the same type may be created for the same model\n * or the same `Variable`.\n */\nexport interface OptimizerVariable {\n  originalName: string;\n  variable: Variable;\n}\n\n/** @doc {heading: 'Training', subheading: 'Classes', namespace: 'train'} */\nexport abstract class Optimizer extends Serializable {\n  protected iterations_: number;\n\n  /**\n   * Executes `f()` and minimizes the scalar output of `f()` by computing\n   * gradients of y with respect to the list of trainable variables provided by\n   * `varList`. If no list is provided, it defaults to all trainable variables.\n   *\n   * @param f The function to execute and whose output to minimize.\n   * @param returnCost Whether to return the scalar cost value produced by\n   * executing `f()`.\n   * @param varList An optional list of variables to update. If specified, only\n   * the trainable variables in varList will be updated by minimize. Defaults to\n   * all trainable variables.\n   *\n   * @doc {heading: 'Training', subheading: 'Optimizers'}\n   */\n  minimize(f: () => Scalar, returnCost = false, varList?: Variable[]): Scalar\n      |null {\n    const {value, grads} = this.computeGradients(f, varList);\n\n    if (varList != null) {\n      const gradArray: NamedTensor[] =\n          varList.map(v => ({name: v.name, tensor: grads[v.name]}));\n      this.applyGradients(gradArray);\n    } else {\n      this.applyGradients(grads);\n    }\n\n    // Dispose gradients.\n    dispose(grads);\n\n    if (returnCost) {\n      return value;\n    } else {\n      value.dispose();\n      return null;\n    }\n  }\n\n  /**\n   * The number of iterations that this optimizer instance has been invoked for.\n   */\n  get iterations(): number {\n    if (this.iterations_ == null) {\n      this.iterations_ = 0;\n    }\n    return this.iterations_;\n  }\n\n  protected incrementIterations() {\n    this.iterations_ = this.iterations + 1;\n  }\n\n  /**\n   * Executes f() and computes the gradient of the scalar output of f() with\n   * respect to the list of trainable variables provided by `varList`. If no\n   * list is provided, it defaults to all trainable variables.\n   *\n   * @param f The function to execute and whose output to use for computing\n   * gradients with respect to variables.\n   * @param varList An optional list of variables to compute gradients with\n   * respect to. If specified, only the trainable variables in varList will have\n   * gradients computed with respect to. Defaults to all trainable variables.\n   *\n   * @doc {heading: 'Training', subheading: 'Optimizers'}\n   */\n  computeGradients(f: () => Scalar, varList?: Variable[]):\n      {value: Scalar, grads: NamedTensorMap} {\n    return variableGrads(f, varList);\n  }\n\n  /**\n   * Updates variables by using the computed gradients.\n   *\n   * @param variableGradients A mapping of variable name to its gradient value.\n   *\n   * @doc {heading: 'Training', subheading: 'Optimizers'}\n   */\n  abstract applyGradients(variableGradients: NamedTensorMap|\n                          NamedTensor[]): void;\n\n  /**\n   * Dispose the variables (if any) owned by this optimizer instance.\n   */\n  dispose(): void {\n    if (this.iterations_ != null) {\n      dispose(this.iterations_);\n    }\n  }\n\n  async saveIterations(): Promise<NamedTensor> {\n    if (this.iterations_ == null) {\n      this.iterations_ = 0;\n    }\n    return {\n      name: 'iter',  // Named for Python compatibility.\n      // TODO(cais): Use 'int64' type when available.\n      tensor: scalar(this.iterations_, 'int32')\n    };\n  }\n\n  async getWeights(): Promise<NamedTensor[]> {\n    throw new Error('getWeights() is not implemented for this optimizer yet.');\n  }\n\n  async setWeights(weightValues: NamedTensor[]): Promise<void> {\n    throw new Error(\n        `setWeights() is not implemented for this optimizer class ` +\n        `${this.getClassName()}`);\n  }\n\n  /**\n   * Extract the first element of the weight values and set it\n   * as the iterations counter variable of this instance of optimizer.\n   *\n   * @param weightValues\n   * @returns Weight values with the first element consumed and excluded.\n   */\n  protected async extractIterations(weightValues: NamedTensor[]):\n      Promise<NamedTensor[]> {\n    this.iterations_ = (await weightValues[0].tensor.data())[0];\n    return weightValues.slice(1);\n  }\n}\n\nObject.defineProperty(Optimizer, Symbol.hasInstance, {\n  value: (instance: Optimizer) => {\n    return instance.minimize != null && instance.computeGradients != null &&\n        instance.applyGradients != null;\n  }\n});\n"},"lineCount":null}},"error":null,"hash":"47acd1c60a3d9dd392dd0cfa9faafd3e","cacheData":{"env":{}}}