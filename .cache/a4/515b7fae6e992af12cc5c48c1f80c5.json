{"id":"rVC8","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/src/ops/log_softmax.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609563562293},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../kernel_names","loc":{"line":18,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/kernel_names.js"},{"name":"../tensor_util_env","loc":{"line":19,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/tensor_util_env.js"},{"name":"./cast","loc":{"line":20,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/cast.js"},{"name":"./exp","loc":{"line":21,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/exp.js"},{"name":"./log","loc":{"line":22,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log.js"},{"name":"./max","loc":{"line":23,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/max.js"},{"name":"./operation","loc":{"line":24,"column":19},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/operation.js"},{"name":"./sub","loc":{"line":25,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js"},{"name":"./sum","loc":{"line":26,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/log_softmax.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sum.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.logSoftmax=void 0;var e=require(\"../engine\"),r=require(\"../kernel_names\"),o=require(\"../tensor_util_env\"),t=require(\"./cast\"),n=require(\"./exp\"),s=require(\"./log\"),a=require(\"./max\"),i=require(\"./operation\"),u=require(\"./sub\"),l=require(\"./sum\");function x(i,x=-1){const g=(0,o.convertToTensor)(i,\"logits\",\"logSoftmax\");if(-1===x&&(x=g.rank-1),x!==g.rank-1)throw Error(\"Log Softmax along a non-last dimension is not yet supported. \"+`Logits was rank ${g.rank} and axis was ${x}`);const m={logits:g},c={axis:x};return e.ENGINE.runKernelFunc((e,r)=>{const o=(0,a.max)(i,x,!0),g=(0,u.sub)(i,o),m=(0,u.sub)((0,t.cast)(g,\"float32\"),(0,s.log)((0,l.sum)((0,n.exp)(g),x,!0)));return r([m]),m},m,null,r.LogSoftmax,c)}const g=(0,i.op)({logSoftmax_:x});exports.logSoftmax=g;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":0}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":13}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":20}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":35}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":43}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":56}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":57}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":64}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":68}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":76}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":92}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":94}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":98}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":100}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":108}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":121}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":123}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":131}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":150}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":152}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":160}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":182}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":184}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":192}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":202}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":204}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":212}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":221}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":223}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":231}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":240}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":242}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":250}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":259}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":261}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":269}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":284}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":286}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":294}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":303}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":305}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":313}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":55,"column":0},"generated":{"line":1,"column":322}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":55,"column":9},"generated":{"line":1,"column":331}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":55,"column":39},"generated":{"line":1,"column":333}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":55,"column":61},"generated":{"line":1,"column":335}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":55,"column":68},"generated":{"line":1,"column":338}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":341}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":347}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":350}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":352}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":354}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":371}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":42},"generated":{"line":1,"column":373}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":56,"column":52},"generated":{"line":1,"column":382}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":61,"column":6},"generated":{"line":1,"column":396}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":1,"column":400}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":1,"column":404}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":408}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":410}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":59,"column":19},"generated":{"line":1,"column":412}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":59,"column":26},"generated":{"line":1,"column":417}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":61,"column":6},"generated":{"line":1,"column":420}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":61,"column":15},"generated":{"line":1,"column":424}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":61,"column":23},"generated":{"line":1,"column":426}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":61,"column":30},"generated":{"line":1,"column":431}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":433}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":439}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":445}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":528}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":64,"column":35},"generated":{"line":1,"column":530}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":64,"column":56},"generated":{"line":1,"column":551}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":556}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":562}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":77,"column":35},"generated":{"line":1,"column":564}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":77,"column":36},"generated":{"line":1,"column":565}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":77,"column":44},"generated":{"line":1,"column":572}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":575}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":78,"column":33},"generated":{"line":1,"column":577}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":78,"column":34},"generated":{"line":1,"column":578}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":78,"column":34},"generated":{"line":1,"column":583}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":80,"column":9},"generated":{"line":1,"column":586}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":80,"column":9},"generated":{"line":1,"column":593}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":80,"column":16},"generated":{"line":1,"column":595}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":80,"column":16},"generated":{"line":1,"column":602}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":67,"column":39},"generated":{"line":1,"column":616}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":67,"column":40},"generated":{"line":1,"column":617}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":67,"column":49},"generated":{"line":1,"column":619}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":68,"column":10},"generated":{"line":1,"column":624}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":10},"generated":{"line":1,"column":630}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":17},"generated":{"line":1,"column":633}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":21},"generated":{"line":1,"column":635}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":21},"generated":{"line":1,"column":637}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":21},"generated":{"line":1,"column":642}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":29},"generated":{"line":1,"column":644}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":69,"column":35},"generated":{"line":1,"column":647}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":70,"column":10},"generated":{"line":1,"column":650}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":70,"column":20},"generated":{"line":1,"column":653}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":70,"column":24},"generated":{"line":1,"column":655}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":70,"column":24},"generated":{"line":1,"column":657}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":70,"column":24},"generated":{"line":1,"column":662}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":70,"column":32},"generated":{"line":1,"column":664}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":71,"column":10},"generated":{"line":1,"column":667}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":670}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":672}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":674}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":680}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":17},"generated":{"line":1,"column":682}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":17},"generated":{"line":1,"column":684}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":17},"generated":{"line":1,"column":690}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":1,"column":692}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":38},"generated":{"line":1,"column":704}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":42},"generated":{"line":1,"column":706}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":42},"generated":{"line":1,"column":708}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":42},"generated":{"line":1,"column":714}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":46},"generated":{"line":1,"column":716}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":46},"generated":{"line":1,"column":718}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":46},"generated":{"line":1,"column":724}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":50},"generated":{"line":1,"column":726}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":50},"generated":{"line":1,"column":728}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":50},"generated":{"line":1,"column":733}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":72,"column":60},"generated":{"line":1,"column":736}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":68,"column":21},"generated":{"line":1,"column":739}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":744}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":73,"column":4},"generated":{"line":1,"column":751}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":1,"column":753}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":73,"column":10},"generated":{"line":1,"column":754}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":758}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":81,"column":22},"generated":{"line":1,"column":761}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":81,"column":54},"generated":{"line":1,"column":763}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":82,"column":13},"generated":{"line":1,"column":768}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":80,"column":9},"generated":{"line":1,"column":770}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":1,"column":781}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":784}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":13},"generated":{"line":1,"column":790}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":26},"generated":{"line":1,"column":793}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":29},"generated":{"line":1,"column":795}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":29},"generated":{"line":1,"column":797}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":29},"generated":{"line":1,"column":801}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":30},"generated":{"line":1,"column":802}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":30},"generated":{"line":1,"column":814}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":818}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":826}},{"source":"../../src/ops/log_softmax.ts","name":null,"original":{"line":85,"column":7},"generated":{"line":1,"column":837}}],"sources":{"../../src/ops/log_softmax.ts":"/**\n * @license\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ENGINE, ForwardFunc} from '../engine';\nimport {LogSoftmax, LogSoftmaxAttrs, LogSoftmaxInputs} from '../kernel_names';\nimport {NamedAttrMap} from '../kernel_registry';\nimport {Tensor} from '../tensor';\nimport {NamedTensorMap} from '../tensor_types';\nimport {convertToTensor} from '../tensor_util_env';\nimport {TensorLike} from '../types';\n\nimport {cast} from './cast';\nimport {exp} from './exp';\nimport {log} from './log';\nimport {max} from './max';\nimport {op} from './operation';\nimport {sub} from './sub';\nimport {sum} from './sum';\n\n/**\n * Computes the log softmax.\n *\n * ```js\n * const a = tf.tensor1d([1, 2, 3]);\n *\n * a.logSoftmax().print();  // or tf.logSoftmax(a)\n * ```\n *\n * ```js\n * const a = tf.tensor2d([2, 4, 6, 1, 2, 3], [2, 3]);\n *\n * a.logSoftmax().print();  // or tf.logSoftmax(a)\n * ```\n *\n * @param logits The logits array.\n * @param axis The dimension softmax would be performed on. Defaults to `-1`\n *     which indicates the last dimension.\n *\n * @doc {heading: 'Operations', subheading: 'Normalization'}\n */\nfunction logSoftmax_<T extends Tensor>(logits: T|TensorLike, axis = -1): T {\n  const $logits = convertToTensor(logits, 'logits', 'logSoftmax');\n\n  if (axis === -1) {\n    axis = $logits.rank - 1;\n  }\n  if (axis !== $logits.rank - 1) {\n    throw Error(\n        'Log Softmax along a non-last dimension is not yet supported. ' +\n        `Logits was rank ${$logits.rank} and axis was ${axis}`);\n  }\n\n  const forward: ForwardFunc<Tensor> = (backend, save) => {\n    const keepDims = true;\n    const xMax = max(logits, axis, true);\n    const shifted = sub(logits, xMax);\n    const value =\n        sub(cast(shifted, 'float32'), log(sum(exp(shifted), axis, keepDims)));\n    save([value]);\n    return value;\n  };\n\n  const inputs: LogSoftmaxInputs = {logits: $logits};\n  const attrs: LogSoftmaxAttrs = {axis};\n\n  return ENGINE.runKernelFunc(\n             forward, inputs as {} as NamedTensorMap, null /* grad */,\n             LogSoftmax, attrs as {} as NamedAttrMap) as T;\n}\n\nexport const logSoftmax = op({logSoftmax_});\n"},"lineCount":null}},"error":null,"hash":"769f911df941df16afe7320403588802","cacheData":{"env":{}}}