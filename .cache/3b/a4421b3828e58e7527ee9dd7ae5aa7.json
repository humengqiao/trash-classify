{"id":"XOP8","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/byte_chunk_iterator.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/src/iterators/byte_chunk_iterator.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609563562293},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/package.json","includedInParent":true,"mtime":499162500000},{"name":"@tensorflow/tfjs-core","loc":{"line":18,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/byte_chunk_iterator.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/index.js"},{"name":"./lazy_iterator","loc":{"line":19,"column":48},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/byte_chunk_iterator.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/lazy_iterator.js"},{"name":"./string_iterator","loc":{"line":20,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/byte_chunk_iterator.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/string_iterator.js"},{"name":"string_decoder","loc":{"line":88,"column":46},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/byte_chunk_iterator.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"buffer","parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-data/dist/iterators/byte_chunk_iterator.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ByteChunkIterator=void 0;var r=require(\"@tensorflow/tfjs-core\"),t=require(\"./lazy_iterator\"),s=require(\"./string_iterator\");class u extends t.LazyIterator{decodeUTF8(){return new o(this)}}exports.ByteChunkIterator=u;class o extends s.StringIterator{constructor(e){super(),this.upstream=e,this.impl=new n(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class n extends t.OneToManyIterator{constructor(e){if(super(),this.upstream=e,(0,r.env)().get(\"IS_BROWSER\"))this.decoder=new TextDecoder(\"utf-8\");else{const{StringDecoder:e}=require(\"string_decoder\");this.decoder=new e(\"utf8\")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const t=await this.upstream.next();let s,u;return!t.done&&(s=t.value,u=(0,r.env)().get(\"IS_BROWSER\")?this.decoder.decode(s,{stream:!0}):this.decoder.write(e.from(s.buffer)),this.outputQueue.push(u),!0)}}"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":0}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":4}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":6}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":14}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":24}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":31}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":38}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":53}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":61}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":74}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":75}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":82}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":86}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":94}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":117}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":119}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":123}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":125}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":133}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":2,"column":158}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":2,"column":160}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":2,"column":168}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":2,"column":187}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":2,"column":189}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":2,"column":197}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":2,"column":218}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":23,"column":22},"generated":{"line":2,"column":224}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":23,"column":48},"generated":{"line":2,"column":234}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":2,"column":236}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":33,"column":2},"generated":{"line":2,"column":249}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":34,"column":11},"generated":{"line":2,"column":262}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":34,"column":11},"generated":{"line":2,"column":269}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":2,"column":273}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":2,"column":275}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":282}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":290}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":56},"generated":{"line":2,"column":308}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":2,"column":310}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":49,"column":6},"generated":{"line":2,"column":316}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":49,"column":27},"generated":{"line":2,"column":326}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":2,"column":328}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":52,"column":2},"generated":{"line":2,"column":343}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":52,"column":24},"generated":{"line":2,"column":355}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":53,"column":4},"generated":{"line":2,"column":358}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":52,"column":24},"generated":{"line":2,"column":366}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":52,"column":24},"generated":{"line":2,"column":371}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":52,"column":24},"generated":{"line":2,"column":380}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":54,"column":9},"generated":{"line":2,"column":382}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":54,"column":9},"generated":{"line":2,"column":387}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":2,"column":392}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":54,"column":20},"generated":{"line":2,"column":396}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":54,"column":37},"generated":{"line":2,"column":398}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":57,"column":2},"generated":{"line":2,"column":401}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":58,"column":11},"generated":{"line":2,"column":411}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":58,"column":11},"generated":{"line":2,"column":418}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":2,"column":423}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":58,"column":21},"generated":{"line":2,"column":428}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":2,"column":438}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":62,"column":11},"generated":{"line":2,"column":451}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":62,"column":11},"generated":{"line":2,"column":458}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":2,"column":463}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":2,"column":468}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":2,"column":476}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":6},"generated":{"line":2,"column":482}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":31},"generated":{"line":2,"column":492}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":88,"column":0},"generated":{"line":2,"column":494}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":94,"column":2},"generated":{"line":2,"column":512}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":94,"column":33},"generated":{"line":2,"column":524}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":2,"column":527}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":95,"column":4},"generated":{"line":2,"column":530}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":94,"column":33},"generated":{"line":2,"column":538}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":94,"column":33},"generated":{"line":2,"column":543}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":94,"column":33},"generated":{"line":2,"column":552}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":2,"column":555}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":96,"column":14},"generated":{"line":2,"column":557}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":96,"column":14},"generated":{"line":2,"column":559}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":96,"column":14},"generated":{"line":2,"column":566}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":96,"column":18},"generated":{"line":2,"column":570}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":2,"column":584}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":2,"column":589}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":97,"column":21},"generated":{"line":2,"column":597}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":97,"column":25},"generated":{"line":2,"column":601}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":97,"column":37},"generated":{"line":2,"column":613}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":98,"column":11},"generated":{"line":2,"column":626}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":100,"column":12},"generated":{"line":2,"column":627}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":100,"column":12},"generated":{"line":2,"column":633}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":100,"column":13},"generated":{"line":2,"column":647}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":100,"column":30},"generated":{"line":2,"column":650}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":100,"column":38},"generated":{"line":2,"column":658}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":101,"column":11},"generated":{"line":2,"column":676}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":101,"column":11},"generated":{"line":2,"column":681}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":101,"column":21},"generated":{"line":2,"column":689}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":101,"column":25},"generated":{"line":2,"column":693}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":101,"column":39},"generated":{"line":2,"column":695}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":104,"column":2},"generated":{"line":2,"column":704}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":105,"column":11},"generated":{"line":2,"column":714}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":105,"column":14},"generated":{"line":2,"column":723}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":105,"column":19},"generated":{"line":2,"column":728}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":105,"column":28},"generated":{"line":2,"column":737}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":2,"column":757}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":109,"column":10},"generated":{"line":2,"column":770}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":109,"column":10},"generated":{"line":2,"column":776}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":109,"column":30},"generated":{"line":2,"column":784}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":109,"column":35},"generated":{"line":2,"column":789}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":109,"column":44},"generated":{"line":2,"column":798}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":2,"column":805}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":2,"column":809}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":2,"column":811}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":111,"column":8},"generated":{"line":2,"column":813}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":111,"column":8},"generated":{"line":2,"column":820}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":111,"column":20},"generated":{"line":2,"column":822}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":114,"column":6},"generated":{"line":2,"column":829}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":114,"column":14},"generated":{"line":2,"column":831}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":114,"column":26},"generated":{"line":2,"column":833}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":6},"generated":{"line":2,"column":839}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":118,"column":8},"generated":{"line":2,"column":842}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":118,"column":14},"generated":{"line":2,"column":844}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":118,"column":14},"generated":{"line":2,"column":846}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":118,"column":14},"generated":{"line":2,"column":853}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":118,"column":18},"generated":{"line":2,"column":857}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":13},"generated":{"line":2,"column":871}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":18},"generated":{"line":2,"column":876}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":26},"generated":{"line":2,"column":884}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":33},"generated":{"line":2,"column":891}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":40},"generated":{"line":2,"column":893}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":41},"generated":{"line":2,"column":894}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":119,"column":49},"generated":{"line":2,"column":902}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":13},"generated":{"line":2,"column":906}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":18},"generated":{"line":2,"column":911}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":26},"generated":{"line":2,"column":919}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":32},"generated":{"line":2,"column":925}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":39},"generated":{"line":2,"column":927}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":44},"generated":{"line":2,"column":932}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":121,"column":50},"generated":{"line":2,"column":934}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":123,"column":9},"generated":{"line":2,"column":943}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":123,"column":9},"generated":{"line":2,"column":948}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":123,"column":21},"generated":{"line":2,"column":960}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":123,"column":26},"generated":{"line":2,"column":965}},{"source":"../../src/iterators/byte_chunk_iterator.ts","name":null,"original":{"line":124,"column":11},"generated":{"line":2,"column":969}}],"sources":{"../../src/iterators/byte_chunk_iterator.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * =============================================================================\n */\n\nimport {env} from '@tensorflow/tfjs-core';\nimport {LazyIterator, OneToManyIterator} from './lazy_iterator';\nimport {StringIterator} from './string_iterator';\n\nexport abstract class ByteChunkIterator extends LazyIterator<Uint8Array> {\n  /**\n   * Decode a stream of UTF8-encoded byte arrays to a stream of strings.\n   *\n   * The byte arrays producetd from the ByteChunkIterator on which this is\n   * called will be interpreted as concatenated.  No assumptions are made about\n   * the boundaries of the incoming chunks, so a multi-byte UTF8 encoding of a\n   * character may span the boundary between chunks.  This naturally happens,\n   * for instance, when reading fixed-size byte arrays from a file.\n   */\n  decodeUTF8(): StringIterator {\n    return new Utf8Iterator(this);\n  }\n}\n\n// ============================================================================\n// The following private classes serve to implement the chainable methods\n// on ByteChunkIterator.  Unfortunately they can't be placed in separate files,\n// due to resulting trouble with circular imports.\n// ============================================================================\n\n// We wanted multiple inheritance, e.g.\n//   class Utf8Iterator extends QueueIterator<string>, StringIterator\n// but the TypeScript mixin approach is a bit hacky, so we take this adapter\n// approach instead.\n\nclass Utf8Iterator extends StringIterator {\n  private impl: Utf8IteratorImpl;\n\n  constructor(protected upstream: LazyIterator<Uint8Array>) {\n    super();\n    this.impl = new Utf8IteratorImpl(upstream);\n  }\n\n  summary() {\n    return this.impl.summary();\n  }\n\n  async next() {\n    return this.impl.next();\n  }\n}\n\n/**\n * Decode a stream of UTF8-encoded byte arrays to a stream of strings.\n *\n * This is tricky because the incoming byte array boundaries may disrupt a\n * multi-byte UTF8 character. Thus any incomplete character data at the end of\n * a chunk must be carried over and prepended to the next chunk before\n * decoding. Luckily with native decoder, TextDecoder in browser and\n * string_decoder in node, byte array boundaries are handled automatically.\n *\n * In the context of an input pipeline for machine learning, UTF8 decoding is\n * needed to parse text files containing training examples or prediction\n * requests (e.g., formatted as CSV or JSON). We cannot use the built-in\n * decoding provided by FileReader.readAsText() because here we are in a\n * streaming context, which FileReader does not support.\n *\n * @param upstream A `LazyIterator` of `Uint8Arrays` containing UTF8-encoded\n *   text, which should be interpreted as concatenated.  No assumptions are\n *   made about the boundaries of the incoming chunks, so a multi-byte UTF8\n *   encoding of a character may span the boundary between chunks.  This\n *   naturally happens, for instance, when reading fixed-size byte arrays from a\n *   file.\n */\nclass Utf8IteratorImpl extends OneToManyIterator<string> {\n  // `decoder` as `any` here to dynamically assign value based on the\n  // environment.\n  // tslint:disable-next-line:no-any\n  decoder: any;\n\n  constructor(protected readonly upstream: LazyIterator<Uint8Array>) {\n    super();\n    if (env().get('IS_BROWSER')) {\n      this.decoder = new TextDecoder('utf-8');\n    } else {\n      // tslint:disable-next-line:no-require-imports\n      const {StringDecoder} = require('string_decoder');\n      this.decoder = new StringDecoder('utf8');\n    }\n  }\n  summary() {\n    return `${this.upstream.summary()} -> Utf8`;\n  }\n\n  async pump(): Promise<boolean> {\n    const chunkResult = await this.upstream.next();\n    let chunk;\n    if (chunkResult.done) {\n      return false;\n    } else {\n      chunk = chunkResult.value;\n    }\n\n    let text: string;\n    if (env().get('IS_BROWSER')) {\n      text = this.decoder.decode(chunk, {stream: true});\n    } else {\n      text = this.decoder.write(Buffer.from(chunk.buffer));\n    }\n    this.outputQueue.push(text);\n    return true;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"2906d4c62b7780798f71a3b4045d5948","cacheData":{"env":{}}}