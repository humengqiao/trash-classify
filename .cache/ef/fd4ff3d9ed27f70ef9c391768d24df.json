{"id":"ZLBF","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609565602436},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/add","loc":{"line":19,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../ops/div","loc":{"line":20,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/div.js"},{"name":"../ops/mul","loc":{"line":21,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../ops/pow","loc":{"line":22,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/pow.js"},{"name":"../ops/scalar","loc":{"line":23,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js"},{"name":"../ops/sqrt","loc":{"line":24,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sqrt.js"},{"name":"../ops/square","loc":{"line":25,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/square.js"},{"name":"../ops/sub","loc":{"line":26,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js"},{"name":"../ops/zeros_like","loc":{"line":27,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/zeros_like.js"},{"name":"../serialization","loc":{"line":28,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./optimizer","loc":{"line":29,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adam_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.AdamOptimizer=void 0;var e=require(\"../engine\"),t=require(\"../globals\"),a=require(\"../ops/add\"),i=require(\"../ops/div\"),s=require(\"../ops/mul\"),r=require(\"../ops/pow\"),n=require(\"../ops/scalar\"),c=require(\"../ops/sqrt\"),o=require(\"../ops/square\"),l=require(\"../ops/sub\"),u=require(\"../ops/zeros_like\"),m=require(\"../serialization\"),d=require(\"./optimizer\");class h extends d.Optimizer{constructor(a,i,s,r=null){super(),this.learningRate=a,this.beta1=i,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,t.tidy)(()=>{this.accBeta1=(0,n.scalar)(i).variable(),this.accBeta2=(0,n.scalar)(s).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(r){const n=Array.isArray(r)?r.map(e=>e.name):Object.keys(r);(0,t.tidy)(()=>{const m=(0,l.sub)(1,this.accBeta1),d=(0,l.sub)(1,this.accBeta2);n.forEach((n,l)=>{const h=e.ENGINE.registeredVariables[n];null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:`${n}/m`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))}),null==this.accumulatedSecondMoment[l]&&(this.accumulatedSecondMoment[l]={originalName:`${n}/v`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))});const p=Array.isArray(r)?r[l].tensor:r[n];if(null==p)return;const b=this.accumulatedFirstMoment[l].variable,g=this.accumulatedSecondMoment[l].variable,v=(0,a.add)((0,s.mul)(b,this.beta1),(0,s.mul)(p,1-this.beta1)),q=(0,a.add)((0,s.mul)(g,this.beta2),(0,s.mul)((0,o.square)(p),1-this.beta2)),M=(0,i.div)(v,m),y=(0,i.div)(q,d);b.assign(v),g.assign(q);const B=(0,a.add)((0,s.mul)((0,i.div)(M,(0,a.add)((0,c.sqrt)(y),this.epsilon)),-this.learningRate),h);h.assign(B)}),this.accBeta1.assign((0,s.mul)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,s.mul)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,t.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,t.dispose)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,t.tidy)(()=>{this.accBeta1.assign((0,r.pow)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,r.pow)(this.beta2,this.iterations_+1))});const a=e.length/2;this.accumulatedFirstMoment=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}exports.AdamOptimizer=h,h.className=\"Adam\",(0,m.registerClass)(h);"},"sourceMaps":null,"error":null,"hash":"bf4431f1e5ed0d4465a3f7b0d37451a1","cacheData":{"env":{}}}