{"id":"zRFy","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609565653941},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/add","loc":{"line":19,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../ops/div","loc":{"line":20,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/div.js"},{"name":"../ops/fill","loc":{"line":21,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fill.js"},{"name":"../ops/mul","loc":{"line":22,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../ops/sqrt","loc":{"line":23,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sqrt.js"},{"name":"../ops/square","loc":{"line":24,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/square.js"},{"name":"../serialization","loc":{"line":25,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./optimizer","loc":{"line":26,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.AdagradOptimizer=void 0;var a=require(\"../engine\"),e=require(\"../globals\"),i=require(\"../ops/add\"),r=require(\"../ops/div\"),t=require(\"../ops/fill\"),s=require(\"../ops/mul\"),l=require(\"../ops/sqrt\"),n=require(\"../ops/square\"),u=require(\"../serialization\"),c=require(\"./optimizer\");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className=\"Adagrad\",(0,u.registerClass)(o);"},"sourceMaps":null,"error":null,"hash":"70ad45fa18ad028b3c9b9b40007242d7","cacheData":{"env":{}}}