{"id":"PAQD","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609564004117},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../../gradients","loc":{"line":18,"column":27},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/gradients.js"},{"name":"../../kernel_names","loc":{"line":19,"column":29},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/kernel_names.js"},{"name":"../../tensor_util","loc":{"line":20,"column":31},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/tensor_util.js"},{"name":"../../tensor_util_env","loc":{"line":21,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/tensor_util_env.js"},{"name":"../../util","loc":{"line":22,"column":22},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/util.js"},{"name":"../add","loc":{"line":23,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../broadcast_util","loc":{"line":24,"column":32},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/broadcast_util.js"},{"name":"../fused_util","loc":{"line":25,"column":88},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused_util.js"},{"name":"../mat_mul","loc":{"line":26,"column":40},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mat_mul.js"},{"name":"../operation","loc":{"line":27,"column":19},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/operation.js"},{"name":"../reshape","loc":{"line":28,"column":24},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/fused/mat_mul.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/reshape.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.matMul=void 0;var e=require(\"../../engine\"),r=require(\"../../gradients\"),t=require(\"../../kernel_names\"),a=require(\"../../tensor_util\"),s=require(\"../../tensor_util_env\"),n=d(require(\"../../util\")),u=require(\"../add\"),o=d(require(\"../broadcast_util\")),i=require(\"../fused_util\"),l=require(\"../mat_mul\"),p=require(\"../operation\"),c=require(\"../reshape\");function h(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=a?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(t,s,n):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function f({a:p,b:h,transposeA:d=!1,transposeB:f=!1,bias:m,activation:M=\"linear\",preluActivationWeights:v}){if(!1===(0,i.shouldFuse)(e.ENGINE.state.gradientDepth,M)){let e=(0,l.matMul)(p,h,d,f);return null!=m&&(e=(0,u.add)(e,m)),(0,i.applyActivation)(e,M,v)}let k=(0,s.convertToTensor)(p,\"a\",\"fused matMul\"),b=(0,s.convertToTensor)(h,\"b\",\"fused matMul\");[k,b]=(0,a.makeTypesMatch)(k,b);const g=d?k.shape[k.rank-2]:k.shape[k.rank-1],y=f?b.shape[b.rank-1]:b.shape[b.rank-2],_=d?k.shape[k.rank-1]:k.shape[k.rank-2],q=f?b.shape[b.rank-2]:b.shape[b.rank-1],T=k.shape.slice(0,-2),$=b.shape.slice(0,-2),F=n.sizeFromShape(T),A=n.sizeFromShape($);n.assert(k.rank>=2&&b.rank>=2&&k.rank===b.rank,()=>\"Error in fused matMul: inputs must have the same rank of at least \"+`2, got ranks ${k.rank} and ${b.rank}.`),n.assert(n.arraysEqual(T,$),()=>`Error in fused matMul: outer dimensions (${T}) and (`+`${$}) of Tensors with shapes ${k.shape} and `+`${b.shape} must match.`),n.assert(g===y,()=>`Error in fused matMul: inner shapes (${g}) and (`+`${y}) of Tensors with shapes ${k.shape} and `+`${b.shape} and transposeA=${d}`+` and transposeB=${f} must match.`);const E=k.shape.slice(0,-2).concat([_,q]),O=d?(0,c.reshape)(k,[F,g,_]):(0,c.reshape)(k,[F,_,g]),j=f?(0,c.reshape)(b,[A,q,y]):(0,c.reshape)(b,[A,y,q]);let w,B;null!=m&&(w=(0,s.convertToTensor)(m,\"bias\",\"fused matMul\"),[w]=(0,a.makeTypesMatch)(w,k),o.assertAndGetBroadcastShape(E,w.shape)),null!=v&&(B=(0,s.convertToTensor)(v,\"prelu weights\",\"fused matMul\"));const G=(e,r)=>{const[t,a,s,n]=r,u=(0,i.getFusedDyActivation)((0,c.reshape)(e,s.shape),s,M);let o,p;if(d||f?!d&&f?(o=(0,l.matMul)(u,a,!1,!1),p=(0,l.matMul)(u,t,!0,!1)):d&&!f?(o=(0,l.matMul)(a,u,!1,!0),p=(0,l.matMul)(t,u,!1,!1)):(o=(0,l.matMul)(a,u,!0,!0),p=(0,l.matMul)(u,t,!0,!0)):(o=(0,l.matMul)(u,a,!1,!0),p=(0,l.matMul)(t,u,!0,!1)),null!=m){return[o,p,(0,i.getFusedBiasGradient)(n,u)]}return[o,p]},N=e=>{return e.fusedBatchMatMul({a:O,b:j,transposeA:d,transposeB:f,bias:w,activation:M,preluActivationWeights:B})},P={a:O,b:j,bias:w,preluActivationWeights:B},W={transposeA:d,transposeB:f,activation:M};if(null==m){return(0,r.customGrad)((r,a,s)=>{const n=e.ENGINE.runKernelFunc(N,P,null,t._FusedMatMul,W);return s([r,a,n]),{value:(0,c.reshape)(n,E),gradFunc:G}})(O,j)}return(0,r.customGrad)((r,a,s,n)=>{const u=e.ENGINE.runKernelFunc(N,P,null,t._FusedMatMul,W);return n([r,a,u,s]),{value:(0,c.reshape)(u,E),gradFunc:G}})(O,j,w)}const m=(0,p.op)({fusedMatMul_:f});exports.matMul=m;"},"sourceMaps":null,"error":null,"hash":"1d60fa7c2e0c151743ebb54459ba8394","cacheData":{"env":{}}}