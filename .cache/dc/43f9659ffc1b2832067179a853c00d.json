{"id":"dOmP","dependencies":[{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/package.json","includedInParent":true,"mtime":1609565653941},{"name":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":499162500000},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/add","loc":{"line":19,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../ops/div","loc":{"line":20,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/div.js"},{"name":"../ops/mul","loc":{"line":21,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../ops/sqrt","loc":{"line":22,"column":21},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sqrt.js"},{"name":"../ops/square","loc":{"line":23,"column":23},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/square.js"},{"name":"../ops/sub","loc":{"line":24,"column":20},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js"},{"name":"../ops/zeros_like","loc":{"line":25,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/ops/zeros_like.js"},{"name":"../serialization","loc":{"line":26,"column":30},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./optimizer","loc":{"line":27,"column":26},"parent":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/rmsprop_optimizer.js","resolved":"/Users/humengqiao/Desktop/node-project/trash-classify/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.RMSPropOptimizer=void 0;var e=require(\"../engine\"),a=require(\"../globals\"),s=require(\"../ops/add\"),t=require(\"../ops/div\"),i=require(\"../ops/mul\"),r=require(\"../ops/sqrt\"),n=require(\"../ops/square\"),u=require(\"../ops/sub\"),l=require(\"../ops/zeros_like\"),c=require(\"../serialization\"),m=require(\"./optimizer\");class d extends m.Optimizer{constructor(a,s=.9,t=0,i=null,r=!1){if(super(),this.learningRate=a,this.decay=s,this.momentum=t,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==i&&(this.epsilon=e.ENGINE.backend.epsilon()),null==a)throw new Error(\"learningRate for RMSPropOptimizer must be defined.\")}applyGradients(c){(Array.isArray(c)?c.map(e=>e.name):Object.keys(c)).forEach((m,d)=>{const o=e.ENGINE.registeredVariables[m];null==this.accumulatedMeanSquares[d]&&(this.accumulatedMeanSquares[d]={originalName:`${m}/rms`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMoments[d]&&(this.accumulatedMoments[d]={originalName:`${m}/momentum`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMeanGrads[d]&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${m}/mg`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))});const h=Array.isArray(c)?c[d].tensor:c[m];if(null==h)return;const p=this.accumulatedMeanSquares[d].variable,g=this.accumulatedMoments[d].variable;(0,a.tidy)(()=>{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[d].variable,l=(0,s.add)((0,i.mul)(a,this.decay),(0,i.mul)(h,1-this.decay)),c=(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,u.sub)(e,(0,s.add)((0,n.square)(l),this.epsilon)))),m=(0,s.add)((0,i.mul)(g,this.momentum),c);p.assign(e),a.assign(l),g.assign(m);const b=(0,u.sub)(o,m);o.assign(b)}else{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay)),a=(0,s.add)((0,i.mul)(g,this.momentum),(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,s.add)(e,this.epsilon))));p.assign(e),g.assign(a);const l=(0,u.sub)(o,a);o.assign(l)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,a.dispose)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,a.dispose)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,a.dispose)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const a=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*a,3*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,a){return new e(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)}}exports.RMSPropOptimizer=d,d.className=\"RMSProp\",(0,c.registerClass)(d);"},"sourceMaps":null,"error":null,"hash":"bcf79857b53e4080693dcc661f883807","cacheData":{"env":{}}}